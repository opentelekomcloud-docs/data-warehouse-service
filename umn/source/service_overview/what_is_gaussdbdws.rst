:original_name: dws_01_0002.html

.. _dws_01_0002:

What Is GaussDB(DWS)?
=====================

GaussDB(DWS) is an online data analysis and processing database built on the cloud infrastructure and platform. It offers scalable, ready-to-use, and fully managed analytical database services, and is compatible with ANSI/ISO SQL92, SQL99, and SQL 2003 syntax. Additionally, GaussDB(DWS) is interoperable with other database ecosystems such as PostgreSQL, Oracle, Teradata, and MySQL. This makes it a competitive option for petabyte-scale big data analytics across diverse industries.

.. _en-us_topic_0000002203312045__section131011524141910:

Logical Cluster Architecture
----------------------------

:ref:`Figure 1 <en-us_topic_0000002203312045__fig1310115249196>` shows the logical architecture of a GaussDB(DWS) cluster. For details about the instance, see :ref:`Table 1 <en-us_topic_0000002203312045__table16101024161915>`.

.. _en-us_topic_0000002203312045__fig1310115249196:

.. figure:: /_static/images/en-us_image_0000002203312345.png
   :alt: **Figure 1** Logical cluster architecture

   **Figure 1** Logical cluster architecture

.. _en-us_topic_0000002203312045__table16101024161915:

.. table:: **Table 1** Cluster architecture description

   +----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Name                             | Function                                                                                                                                                                          | Description                                                                                                                                                                                                                                                                                                                                                            |
   +==================================+===================================================================================================================================================================================+========================================================================================================================================================================================================================================================================================================================================================================+
   | Cluster Manager (CM)             | Cluster Manager. It manages and monitors the running status of functional units and physical resources in the distributed system, ensuring system stability.                      | The CM consists of CM Agent, OM Monitor, and CM Server.                                                                                                                                                                                                                                                                                                                |
   |                                  |                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   | -  CM Agent monitors the running status of primary and standby GTMs, CNs, and primary and standby DNs on the host, and reports the status to CM Server. In addition, it executes the arbitration instruction delivered by CM Server. A CM Agent process runs on each host.                                                                                             |
   |                                  |                                                                                                                                                                                   | -  OM Monitor monitors scheduled tasks of CM Agent and restarts CM Agent when CM Agent stops. If CM Agent cannot be restarted, the host cannot be used. In this case, manually rectify this fault.                                                                                                                                                                     |
   |                                  |                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   |    .. note::                                                                                                                                                                                                                                                                                                                                                           |
   |                                  |                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   |       CM Agent cannot be restarted probably because of insufficient system resources, which is not a common situation.                                                                                                                                                                                                                                                 |
   |                                  |                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   | -  CM Server checks whether the current system is normal according to the instance status reported by CM Agent. In the case of exceptions, CM Server delivers recovery commands to CM Agent.                                                                                                                                                                           |
   |                                  |                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   | GaussDB(DWS) provides the primary/standby CM Server solution to ensure system HA. CM Agent connects to the primary CM Server. If the primary CM Server is faulty, the standby CM Server is promoted to primary to prevent a single point of failure (SPOF).                                                                                                            |
   +----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Global Transaction Manager (GTM) | Generates and maintains the globally unique information, such as the transaction ID, transaction snapshot, and timestamp.                                                         | The cluster includes only one pair of GTMs: one primary GTM and one standby GTM.                                                                                                                                                                                                                                                                                       |
   +----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Workload Manager (WLM)           | Workload Manager. It controls allocation of system resources to prevent service congestion and system crash resulting from excessive workload.                                    | You do not need to specify names of hosts where WLMs are to be deployed, because the installation program automatically installs a WLM on each host.                                                                                                                                                                                                                   |
   +----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Coordinator (CN)                 | A CN receives access requests from applications, and returns execution results to the client; splits tasks and allocates task fragments to different DNs for parallel processing. | CNs in a cluster have equivalent roles and return the same result for the same DML statement. Load balancers can be added between CNs and applications to ensure that CNs are transparent to applications. If a CN is faulty, the load balancer automatically connects the application to the other CN. For details, see section "Associating and Disassociating ELB". |
   |                                  |                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   | CNs need to connect to each other in the distributed transaction architecture. To reduce heavy load caused by excessive threads on GTMs, no more than 10 CNs should be configured in a cluster.                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   | GaussDB(DWS) handles the global resource load in a cluster using the Central Coordinator (CCN) for adaptive dynamic load management. When the cluster is started for the first time, the CM selects the CN with the smallest ID as the CCN. If the CCN is faulty, CM replaces it with a new one.                                                                       |
   +----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Datanode (DN)                    | A DN stores data in row-store, column-store, or hybrid mode, executes data query tasks, and returns execution results to CNs.                                                     | There are multiple DNs in the cluster. Each DN stores part of data. GaussDB(DWS) provides DN high availability: active DN, standby DN, and secondary DN. The working principles of the three are as follows:                                                                                                                                                           |
   |                                  |                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   | -  During data synchronization, if the active DN suddenly becomes faulty, the standby DN is switched to the active state.                                                                                                                                                                                                                                              |
   |                                  |                                                                                                                                                                                   | -  Before the faulty active DN recovers, the new active DN synchronizes data logs to the secondary DN.                                                                                                                                                                                                                                                                 |
   |                                  |                                                                                                                                                                                   | -  After the faulty active DN recovers, it becomes the standby DN and uses data logs stored on the secondary DN to restore data generated during its faulty period.                                                                                                                                                                                                    |
   |                                  |                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                        |
   |                                  |                                                                                                                                                                                   | The secondary DN serves exclusively as a backup, never ascending to active or standby status in case of faults. It conserves storage by only holding Xlog data transferred from the new active DN and data replicated during original active DN failures. This efficient approach saves one-third of the storage space compared to conventional tri-backup methods.    |
   +----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Storage                          | Functions as the server's local storage resources to store data permanently.                                                                                                      | ``-``                                                                                                                                                                                                                                                                                                                                                                  |
   +----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

DNs in a cluster store data on disks. :ref:`Figure 2 <en-us_topic_0000002203312045__fig9103172419199>` describes the objects on each DN and the relationships among them logically.

-  A database manages various data objects and is isolated from other databases.
-  A datafile segment stores data in only one table. A table containing more than 1 GB of data is stored in multiple data file segments.
-  A table belongs only to one database.
-  A block is the basic unit of database management, with a default size of 8 KB.

Data can be distributed in replication, round-robin, or hash mode. You can specify the distribution mode during table creation.

.. _en-us_topic_0000002203312045__fig9103172419199:

.. figure:: /_static/images/en-us_image_0000002167906120.png
   :alt: **Figure 2** Logical database architecture

   **Figure 2** Logical database architecture

Storage-Compute Coupled Architecture
------------------------------------

GaussDB(DWS) employs the shared-nothing architecture and the massively parallel processing (MPP) engine, and consists of numerous independent logical nodes that do not share the system resources such as CPUs, memory, and storage. In such a system architecture, service data is separately stored on numerous nodes. Data analysis tasks are executed in parallel on the nodes where data is stored. The massively parallel data processing significantly improves response speed.


.. figure:: /_static/images/en-us_image_0000002168065832.png
   :alt: **Figure 3** Architecture

   **Figure 3** Architecture

-  **Application layer**

   Data loading tools, extract, transform, and load (ETL) tools, business intelligence (BI) tools, as well as data mining and analysis tools, can be integrated with GaussDB(DWS) through standard APIs. GaussDB(DWS) is compatible with the PostgreSQL ecosystem, and the SQL syntax is compatible with Oracle and Teradata. Applications can be smoothly migrated to GaussDB(DWS) with few changes.

-  **API**

   Applications can connect to GaussDB(DWS) through standard JDBC and ODBC.

-  **GaussDB(DWS)**

   A GaussDB(DWS) cluster contains nodes of the same flavor in the same subnet. These nodes jointly provide services. Datanodes (DNs) in a cluster store data on disks. CNs, or Coordinators, receive access requests from the clients and return the execution results. They also split and distribute tasks to the Datanodes (DNs) for parallel execution.

-  **Automatic data backup**

   Cluster snapshots can be automatically backed up to the EB-level Object Storage Service (OBS), which facilitates periodic backup of the cluster during off-peak hours, ensuring data recovery after a cluster exception occurs.

   A snapshot is a complete backup of GaussDB(DWS) at a specified time point. It records all configuration data and service data of the cluster at the specified moment.

-  **Tool chain**

   The parallel data loading tool General Data Service (GDS), SQL syntax migration tool Database Schema Convertor (DSC), and SQL development tool Data Studio are provided. The cluster O&M can be monitored on a console.
