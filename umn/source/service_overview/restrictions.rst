:original_name: dws_01_0010.html

.. _dws_01_0010:

Restrictions
============

This document describes the constraints and precautions of using the key functions of GaussDB(DWS).

After creating a GaussDB(DWS) cluster, you do not need to perform basic database O&M operations, such as HA and security patch installation. However, you need to pay attention to the following:

Specification and Performance Limits
------------------------------------

.. table:: **Table 1** Specification and performance limits

   +-------------------------------+-------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Item                          | Limit                                                                                                                   | Description                                                                                                                                                                                    |
   +===============================+=========================================================================================================================+================================================================================================================================================================================================+
   | Multi-AZ                      | 3                                                                                                                       | -  The **Multi-AZ** option is displayed only if the number of AZs in the selected region is greater than or equal to 3. If this condition is not met, only a single-AZ cluster can be created. |
   |                               |                                                                                                                         | -  For a multi-AZ cluster, only three AZs can be selected at a time so far. Server nodes are evenly distributed among the three AZs.                                                           |
   |                               |                                                                                                                         | -  The numbers of nodes in a multi-AZ cluster must be a multiple of 3.                                                                                                                         |
   |                               |                                                                                                                         | -  In a multi-AZ cluster, the number of DNs must be less than or equal to 2.                                                                                                                   |
   +-------------------------------+-------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Storage                       | -  If you want to increase the upper limit of the storage space of a cloud SSD disk, contact customer service.          | -  Cloud SSD disks offer a cost-effective solution for enterprise systems that require moderate performance.                                                                                   |
   |                               | -  The amount of storage space available on the local SSD disk depends on the type of data warehouse flavor you choose. | -  Local SSD disks do not support disk scale-out.                                                                                                                                              |
   +-------------------------------+-------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Number of deployed CNs        | The value ranges from 3 to the number of cluster nodes. The maximum value is **20** and the default value is **3**.     | In a large-scale cluster, you are advised to deploy multiple CNs.                                                                                                                              |
   +-------------------------------+-------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Maximum number of connections | -  Number of CN connections: 100 to 262,143                                                                             | For details about CNs and DNs, see :ref:`Logical Cluster Architecture <en-us_topic_0000002203312045__section131011524141910>`.                                                                 |
   |                               | -  Number of DN connections: 100 to 262,143                                                                             |                                                                                                                                                                                                |
   +-------------------------------+-------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Quota Limits
------------

.. table:: **Table 2** Quota limits

   +---------------------------------------+------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Item                                  | Limit                                                            | Description                                                                                                                                                                                                             |
   +=======================================+==================================================================+=========================================================================================================================================================================================================================+
   | Number of nodes                       | 256                                                              | The number of nodes in a new cluster cannot exceed the quota that can be used by a user or 256. If the node quota is insufficient, click **Increase quota** to submit a service ticket and apply for higher node quota. |
   +---------------------------------------+------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Tags                                  | Each cluster can have a maximum of 20 tags.                      | For more information, see "Overview" in *GaussDB(DWS) User Guide*.                                                                                                                                                      |
   +---------------------------------------+------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Retention period of automated backups | The value ranges from 1 to 31 days. The default value is 7 days. | The system deletes expired snapshots when the retention period ends.                                                                                                                                                    |
   +---------------------------------------+------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Naming Rules
------------

.. table:: **Table 3** Naming rules

   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Item                              | Description                                                                                                                                                                                                           |
   +===================================+=======================================================================================================================================================================================================================+
   | Cluster name                      | Enter 4 to 64 characters. Only letters (case-insensitive), digits, hyphens (-), and underscores (_) are allowed. The name must start with a letter.                                                                   |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Administrator account             | -  The username can contain only lowercase letters, digits, and underscores (_).                                                                                                                                      |
   |                                   | -  The username must start with a lowercase letter or an underscore (_).                                                                                                                                              |
   |                                   | -  The username should contain 6 to 64 characters.                                                                                                                                                                    |
   |                                   | -  The username cannot be a keyword of the GaussDB(DWS) database. For details about the keywords of the GaussDB(DWS) database, see "SQL Reference" > "Keyword" in the *Data Warehouse Service (DWS) Developer Guide*. |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Role name                         | The value must start with a letter and can contain a maximum of 63 characters, including letters, digits, and underscores (_).                                                                                        |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Username                          | The value must start with a letter and can contain a maximum of 63 characters, including letters, digits, and underscores (_).                                                                                        |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Snapshot name                     | The snapshot name must be 4 to 64 characters in length and start with a letter. It is case-insensitive and contains only letters, digits, hyphens (-), and underscores (_).                                           |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Snapshot policy name              | The policy name must be unique, consist of 4 to 92 characters, and start with a letter. It is case-insensitive and can contain only letters, digits, hyphens (-), and underscores (_).                                |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Alarm rule name                   | The rule name contains 6 to 64 characters and can contain only letters, digits, and slashes (/).                                                                                                                      |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | DR name                           | The DR name is a string of 4 to 64 case-insensitive characters and must start with a letter. It can contain only letters, digits, hyphens (-), and underscores (_).                                                   |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Restrictions on Basic Cluster Operations
----------------------------------------

.. table:: **Table 4** Restrictions on basic cluster operations

   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Item                              | Description                                                                                                                                                                                                                                                                                               |
   +===================================+===========================================================================================================================================================================================================================================================================================================+
   | Binding a load balancer           | -  To bind an ELB to a GaussDB(DWS) cluster, the ELB must be in the same region, VPC, and enterprise project as the cluster.                                                                                                                                                                              |
   |                                   | -  Only dedicated load balancers can be bound to GaussDB(DWS).                                                                                                                                                                                                                                            |
   |                                   | -  When you disassociate ELB from a cluster, related cluster information is cleared on GaussDB(DWS) but the load balancer is not deleted.                                                                                                                                                                 |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Adding or deleting a CN node      | -  The default number of CNs is 3. You can adjust the number of CNs based on the number of provisioned nodes. The number of CNs ranges from 2 to 20.                                                                                                                                                      |
   |                                   | -  If one of your CNs is abnormal, you can only delete this abnormal CN. If two or more CNs are abnormal, you can delete CNs only after the CNs are recovered from faults.                                                                                                                                |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Managing resource load            | -  Resources cannot be managed during offline scale-out. If a resource management plan is enabled, stop it before performing offline scale-out.                                                                                                                                                           |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Managing logical clusters         | -  You are advised to allocate tables in a database to the same logical cluster.                                                                                                                                                                                                                          |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Restarting a cluster              | A cluster cannot provide services during the restart. Therefore, before the restart, ensure that no task is running and all data is saved.                                                                                                                                                                |
   |                                   |                                                                                                                                                                                                                                                                                                           |
   |                                   | If a cluster is processing transactional data, for example, importing data, querying data, creating snapshots, or restoring snapshots, files may be damaged or the cluster may fail to be restarted once the cluster is restarted. You are advised to stop all cluster tasks before restarting a cluster. |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Starting or stopping a cluster    | After the cluster is stopped, ECS basic resources (vCPUs and memory) are no longer reserved. When you start the service again, it may fail to be started due to insufficient resources. In this case, wait for a while and try again later.                                                               |
   +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Restrictions on Cluster O&M Operations
--------------------------------------

.. table:: **Table 5** Cluster O&M operation restrictions

   +------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Item                                     | Description                                                                                                                                                                                                                                                                                                          |
   +==========================================+======================================================================================================================================================================================================================================================================================================================+
   | Scaling out a cluster                    | -  The cluster will be intermittently disconnected during scale-out. Exercise caution when performing this operation.                                                                                                                                                                                                |
   |                                          | -  Certain cluster functions, including restarting, stopping, and starting, modifying specifications, adding or removing CNs, creating snapshots, and resetting the database administrator's password, cannot be performed while scaling out the cluster.                                                            |
   |                                          | -  This function can be manually enabled only when the cluster task information displays **To be redistributed** after scale-out.                                                                                                                                                                                    |
   +------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Scaling in a cluster                     | -  When scaling in a cluster, several functions are disabled, including cluster restart, cluster scale-out, snapshot creation, node management, intelligent O&M, resource management, parameter modification, security configurations, log service, database administrator password resetting, and cluster deletion. |
   +------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Performing elastic specification changes | -  Elastic specification change is only supported by storage-compute coupled clusters that use ECSs and EVS disks. Clusters with local ECSs do not have this capability.                                                                                                                                             |
   |                                          | -  Stop the VM before changing the flavor. The flavor change can only be done offline and it takes 5 to 10 minutes.                                                                                                                                                                                                  |
   +------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Performing classic specification changes | -  A cluster can have up to 240 nodes. The old and new clusters can have up to 480 nodes in total.                                                                                                                                                                                                                   |
   |                                          | -  Logical clusters do not support the **Change all specifications** option.                                                                                                                                                                                                                                         |
   +------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Backing up and restoring a cluster       | -  **Backing up the cluster is essential for maintaining data reliability, especially when the service provider cannot restore data through upstream re-import. This helps prevent data loss caused by human or other factors.**                                                                                     |
   |                                          | -  If a snapshot is being created for a cluster, the cluster cannot be restarted, scaled, its password cannot be reset, and its configurations cannot be modified.                                                                                                                                                   |
   +------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Upgrading a cluster                      | -  If you are using a version of 8.1.3 or earlier, you will not be able to roll back or submit upgrade tasks until the cluster upgrade is finished.                                                                                                                                                                  |
   |                                          | -  DR cannot be established after a hot patch is installed in a cluster.                                                                                                                                                                                                                                             |
   +------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Managing DR tasks                        | -  If the DR task is stopped or encounters an abnormal situation, but the DR cluster remains normal, it can still provide read services. Once the DR switchover is completed, the DR cluster can provide both read and write services.                                                                               |
   |                                          | -  After creating the DR cluster, the snapshot function of the production cluster remains normal, but the snapshot function of the DR cluster is disabled, along with the restoration function for both the production and DR clusters.                                                                              |
   |                                          | -  Logical clusters and resource pools are not supported.                                                                                                                                                                                                                                                            |
   +------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Managing logs                            | -  This function cannot be used if OBS is not available.                                                                                                                                                                                                                                                             |
   |                                          | -  When CNs are changed, such as modifying specifications or adding/deleting CNs, there is a risk of data loss. To mitigate this risk, disable audit log dump while performing the change.                                                                                                                           |
   +------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
