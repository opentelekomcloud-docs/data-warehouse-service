:original_name: dws_01_0010.html

.. _dws_01_0010:

Restrictions
============

This document describes the constraints and precautions of using the key functions of GaussDB(DWS).

After creating a GaussDB(DWS) cluster, you do not need to perform basic database O&M operations, such as HA and security patch installation. However, you need to pay attention to the following:

.. table:: **Table 1** GaussDB (DWS) constraints

   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Item                              | Constraint                                                                                                                                                                                                                                                                                                                         |
   +===================================+====================================================================================================================================================================================================================================================================================================================================+
   | Creating a Cluster                | -  After a cluster is created, its type cannot be changed.                                                                                                                                                                                                                                                                         |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Connecting to a Cluster           | -  If you use a client to connect to a cluster, its VPC subnet must be the same as that of the cluster.                                                                                                                                                                                                                            |
   |                                   | -  You can manage clusters only and cannot directly access nodes in a cluster. You can use a cluster's IP address and port to access the database in the cluster.                                                                                                                                                                  |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | SQL Syntax Changes                | -  The hybrid data warehouse (standalone) does not support full-text search, OBS and HDFS foreign table import and export, automatic partition creation, sequence, and related functions.                                                                                                                                          |
   |                                   | -  The hybrid data warehouse (standalone) has only one DN. Therefore, the distribution rule is ignored and cannot be modified.                                                                                                                                                                                                     |
   |                                   | -  If you copy commands from the document to the operating environment, the text wraps automatically, causing command execution failures. To solve the problem, delete the line break.                                                                                                                                             |
   |                                   | -  You are advised to create databases as required. Do not use the default gaussdb database of a cluster.                                                                                                                                                                                                                          |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Changing Flavor                   | -  Only clusters of version 8.1.1.300 or later support flavor change.                                                                                                                                                                                                                                                              |
   |                                   | -  Currently, only offline flavor chage is supported. The change takes about 10 minutes.                                                                                                                                                                                                                                           |
   |                                   | -  If your cluster is created using local disks or compute-storage integration, you cannot change the flavor of the cluster. If you need nodes with a higher flavor, create a new cluster. Currently, you can only change the flavors of cloud data warehouse clusters that use SSD cloud disks or hybrid data warehouse clusters. |
   |                                   |                                                                                                                                                                                                                                                                                                                                    |
   |                                   | -  Currently, changing all specifications can only be performed for standard data warehouses and hybrid data warehouses (except single-node deployment). The **Change all specifications** option does not support logical clusters.                                                                                               |
   |                                   | -  A cluster can have up to 240 nodes. The old and new clusters can have up to 480 nodes in total.                                                                                                                                                                                                                                 |
   |                                   | -  Disk capacity expansion can be performed only for standard data warehouses using SSD, hybrid data warehouses, or stream data warehouses. Only version 8.1.1.203 and later are supported.                                                                                                                                        |
   |                                   | -  Disk capacity can be expanded only if the cluster is in **Available**, **To be restarted**, **Read-only**, or **Node fault**, **Unbalanced** state.                                                                                                                                                                             |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Scaling Out                       | -  When you scale out the standard data warehouse cluster, use the same storage specifications as the cluster.                                                                                                                                                                                                                     |
   |                                   | -  The cluster redistribution function is supported in cluster versions.                                                                                                                                                                                                                                                           |
   |                                   | -  This function can be manually enabled only when the cluster task information displays **To be redistributed** after scale-out.                                                                                                                                                                                                  |
   |                                   | -  Scale-in is supported only by clusters of version 8.1.1.300 and later.                                                                                                                                                                                                                                                          |
   |                                   | -  When you scale in a standard data warehouse cluster, you can only modify the same storage specifications as used by the cluster.                                                                                                                                                                                                |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Backing Up a Cluster              | -  The new GaussDB(DWS) cluster created based on the snapshot must have the same configurations as the original cluster. That is, the number and specifications of nodes, memory, and disks in the new cluster must be the same as those in the original cluster.                                                                  |
   |                                   | -  If you create a new cluster based on a snapshot without modifying parameters, the parameters of the new cluster will be the same as those of the snapshot.                                                                                                                                                                      |
   |                                   | -  During snapshot creation, do not perform the VACUUM FULL operation, or the cluster may become read-only.                                                                                                                                                                                                                        |
   |                                   | -  Snapshot creation affects disk I/O performance. You are advised to create snapshots during off-peak hours.                                                                                                                                                                                                                      |
   |                                   | -  During the snapshot creation, some intermediate files are retained, which occupy extra disk space. Therefore, avoid peak hours and ensure that the disk capacity usage is less than 70%.                                                                                                                                        |
   |                                   | -  Snapshots can be restored to the current cluster, but logical clusters and resource pools cannot be restored to the current cluster.                                                                                                                                                                                            |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Version Upgrade                   | -  Cluster 8.1.1 and later versions allow users to deliver cluster upgrade operations on the console.                                                                                                                                                                                                                              |
   |                                   | -  If the cluster is interrupted for a long time due to a node fault or system upgrade, contact technical support.                                                                                                                                                                                                                 |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Data Migration                    | -  Ensure that no Chinese characters are contained in paths used for importing data to or exporting data from OBS.                                                                                                                                                                                                                 |
   |                                   | -  Data cannot be imported to or exported from OBS across regions. Ensure that OBS and the GaussDB(DWS) cluster are in the same region.                                                                                                                                                                                            |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Failover                          | -  When the DR task is created, the snapshot function of the production cluster is normal, but that of the DR cluster is disabled. Besides, snapshot restoration of both clusters is disabled.                                                                                                                                     |
   |                                   | -  DR does not synchronize data from external sources.                                                                                                                                                                                                                                                                             |
   |                                   | -  DR management refers to dual-cluster DR under the same tenant.                                                                                                                                                                                                                                                                  |
   |                                   | -  The DR cluster and the production cluster must be logically homogeneous and in the same type and version.                                                                                                                                                                                                                       |
   |                                   | -  The production cluster and DR cluster used for intra-region DR must be in the same VPC.                                                                                                                                                                                                                                         |
   |                                   | -  In intra-region DR, after services are switched over from the production cluster to the DR cluster, the bound ELB is automatically switched to the new production cluster. During the switchover, the connection is interrupted for a short period of time. Do not run service statements to write data during the switchover.  |
   |                                   | -  During intra-region DR, the EIP, intranet domain name, and connection IP address of the original production cluster are not automatically switched with the cluster switchover. The EIP, domain name, or IP address used for connection in the service system need to be switched to the new cluster.                           |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Hot and Cold Data Management      | -  The hybrid data warehouse (standalone) does not support cold and hot partition switchover.                                                                                                                                                                                                                                      |
   |                                   | -  Currently, cold and hot tables support only column-store partitioned tables of version 2.0. Foreign tables do not support cold and hot partitions.                                                                                                                                                                              |
   |                                   | -  Only hot data can be switched to cold data. Cold data cannot be switched to hot data.                                                                                                                                                                                                                                           |
   |                                   | -  A partition on a DN is either hot or cold. For a partition across DNs, its data on some DNs may be hot, and some may be cold.                                                                                                                                                                                                   |
   |                                   | -  Only the cold and hot switchover policies can be modified. The tablespace of cold data in cold and hot tables cannot be modified.                                                                                                                                                                                               |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Stream Data Warehouse             | -  Time series tables do not support UPDATE, UPSERT, primary keys, or PCKs.                                                                                                                                                                                                                                                        |
   |                                   | -  To create a time series table, you must have the **USAGE** permission on schema cstore.                                                                                                                                                                                                                                         |
   |                                   | -  When you modify the **enable_delta** parameter of a time series table, other ALTER operations cannot be performed.                                                                                                                                                                                                              |
   +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
