:original_name: dws_02_0025.html

.. _dws_02_0025:

Querying Snapshot Details
=========================

Function
--------

This API is used to query snapshot details by using the snapshot ID.

URI
---

.. code-block:: text

   GET /v1.0/{project_id}/snapshots/{snapshot_id}

.. table:: **Table 1** URI parameter description

   +-------------+-----------+--------+------------------------------------------------------------------------------------------------------+
   | Parameter   | Mandatory | Type   | Description                                                                                          |
   +=============+===========+========+======================================================================================================+
   | project_id  | Yes       | String | Project ID. For details about how to obtain the ID, see :ref:`Obtaining a Project ID <dws_02_0011>`. |
   +-------------+-----------+--------+------------------------------------------------------------------------------------------------------+
   | snapshot_id | Yes       | String | Snapshot ID                                                                                          |
   +-------------+-----------+--------+------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

.. table:: **Table 2** Response body parameters

   +-----------+---------------------------------------------------------------------------------+-----------------+
   | Parameter | Type                                                                            | Description     |
   +===========+=================================================================================+=================+
   | snapshot  | :ref:`SnapshotDetail <en-us_topic_0000001185833136__table8495161919476>` object | Snapshot object |
   +-----------+---------------------------------------------------------------------------------+-----------------+

.. _en-us_topic_0000001185833136__table8495161919476:

.. table:: **Table 3** SnapshotDetail

   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | Parameter                  | Type                                                                                       | Description                                                                                                      |
   +============================+============================================================================================+==================================================================================================================+
   | id                         | String                                                                                     | Snapshot ID                                                                                                      |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | name                       | String                                                                                     | Snapshot name                                                                                                    |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | description                | String                                                                                     | Snapshot description                                                                                             |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | started                    | String                                                                                     | Time when a snapshot starts to be created. Format: ISO8601: YYYY-MM-DDThh:mm:ssZ                                 |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | finished                   | String                                                                                     | Time when a snapshot is complete. Format: ISO8601: YYYY-MM-DDThh:mm:ssZ                                          |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | size                       | Double                                                                                     | Snapshot size, in GB                                                                                             |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | status                     | String                                                                                     | Snapshot status:                                                                                                 |
   |                            |                                                                                            |                                                                                                                  |
   |                            |                                                                                            | -  CREATING                                                                                                      |
   |                            |                                                                                            | -  AVAILABLE                                                                                                     |
   |                            |                                                                                            | -  UNAVAILABLE                                                                                                   |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | type                       | String                                                                                     | Snapshot type. It can be:                                                                                        |
   |                            |                                                                                            |                                                                                                                  |
   |                            |                                                                                            | -  **MANUAL**                                                                                                    |
   |                            |                                                                                            | -  **AUTOMATED**                                                                                                 |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | cluster_id                 | String                                                                                     | ID of the cluster for which snapshots are created.                                                               |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | cluster_name               | String                                                                                     | Name of the cluster for which the snapshot is created                                                            |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | backup_key                 | String                                                                                     | Key generated during backup                                                                                      |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | prior_backup_key           | String                                                                                     | Backup key of the previous snapshot used by the incremental backup The value **FULL** indicates a full snapshot. |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | base_backup_key            | String                                                                                     | Backup key of a full snapshot                                                                                    |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | backup_device              | String                                                                                     | Backup media                                                                                                     |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | total_backup_size          | Long                                                                                       | Accumulated size of a snapshot, from the full backup to the incremental backup. Unit: KB                         |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | base_backup_name           | String                                                                                     | Name of a full snapshot                                                                                          |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | support_inplace_restore    | Boolean                                                                                    | Whether data can be restored to the original cluster                                                             |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | fine_grained_backup        | Boolean                                                                                    | Whether the backup is a fine-grained backup                                                                      |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | fine_grained_backup_detail | :ref:`FineGrainedSnapshotDetail <en-us_topic_0000001185833136__table4509171964717>` object | Fine-grained backup information                                                                                  |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | guest_agent_version        | String                                                                                     | GuestAgent version                                                                                               |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | cluster_status             | String                                                                                     | Cluster status                                                                                                   |
   |                            |                                                                                            |                                                                                                                  |
   |                            |                                                                                            | -  **AVAILABLE**                                                                                                 |
   |                            |                                                                                            |                                                                                                                  |
   |                            |                                                                                            | -  **UNAVAILABLE**                                                                                               |
   |                            |                                                                                            |                                                                                                                  |
   |                            |                                                                                            | -  **FROZEN**                                                                                                    |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | bak_expected_start_time    | String                                                                                     | Estimated snapshot start time                                                                                    |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | bak_keep_day               | Integer                                                                                    | Backup retention days                                                                                            |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | bak_period                 | String                                                                                     | Cluster policy                                                                                                   |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | db_user                    | String                                                                                     | Backup user                                                                                                      |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | datastore                  | :ref:`DataStore <en-us_topic_0000001185833136__table15111519194718>` object                | Database version                                                                                                 |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | progress                   | String                                                                                     | Backup progress                                                                                                  |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+
   | backup_level               | String                                                                                     | Backup level                                                                                                     |
   |                            |                                                                                            |                                                                                                                  |
   |                            |                                                                                            | -  cluster                                                                                                       |
   |                            |                                                                                            | -  schema                                                                                                        |
   +----------------------------+--------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000001185833136__table4509171964717:

.. table:: **Table 4** FineGrainedSnapshotDetail

   =========== =============== =================
   Parameter   Type            Description
   =========== =============== =================
   database    String          Database backup
   schema_list Array of String Backup schema set
   table_list  Array of String Backup table set
   =========== =============== =================

.. _en-us_topic_0000001185833136__table15111519194718:

.. table:: **Table 5** DataStore

   ========= ====== ================
   Parameter Type   Description
   ========= ====== ================
   type      String Database type
   version   String Database version
   ========= ====== ================

Request Message
---------------

.. code-block:: text

   GET https://{Endpoint}/v1.0/89cd04f168b84af6be287f71730fdb4b/snapshots/b5c45780-1006-49e3-b2d5-b3229975bbc7

Response Message
----------------

.. code-block::

   {
       "snapshot": {
           "id": "2a4d0f86-67cd-408a-8b66-017454fb7793",
           "name": "snapshot-1",
           "description": "snapshot description",
           "started": "2016-08-23T03:59:23Z",
           "finished": "2016-08-23T04:01:40Z",
           "size": 500,
           "status": "AVAILABLE",
           "type": "MANUAL",
           "cluster_id": "4f87d3c4-9e33-482f-b962-e23b30d1a18c"
       }
   }

Status Code
-----------

=========== =====================================
Status Code Description
=========== =====================================
200         The snapshot details are queried.
400         Request error.
401         Authentication failed.
403         You do not have required permissions.
404         No resources found.
500         Internal service error.
503         Service unavailable.
=========== =====================================
