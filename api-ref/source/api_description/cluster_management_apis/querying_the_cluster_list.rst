:original_name: dws_02_0018.html

.. _dws_02_0018:

Querying the Cluster List
=========================

Function
--------

This API is used to query and display the cluster list.

URI
---

-  URI format

   .. code-block:: text

      GET /v1.0/{project_id}/clusters

-  Parameter description

   .. table:: **Table 1** URI parameters

      +------------+-----------+--------+------------------------------------------------------------------------------------------------------+
      | Parameter  | Mandatory | Type   | Description                                                                                          |
      +============+===========+========+======================================================================================================+
      | project_id | Yes       | String | Project ID. For details about how to obtain the ID, see :ref:`Obtaining a Project ID <dws_02_0011>`. |
      +------------+-----------+--------+------------------------------------------------------------------------------------------------------+

Request
-------

Request example

.. code-block:: text

   GET https://{Endpoint}/v1.0/89cd04f168b84af6be287f71730fdb4b/clusters

Response
--------

-  Example response

   .. code-block::

      {
              "clusters": [
              {
              "id": "7d85f602-a948-4a30-afd4-e84f47471c15",
              "name": "dws-1",
              "status": "AVAILABLE",
              "version": "1.2.0",
              "updated": "2016-02-10T14:28:14Z",
              "created": "2016-02-10T14:26:14Z",
              "port": 8000,
              "endpoints": [{
                      "connect_info": "192.168.0.12:8000",
                      "jdbc_url": "jdbc:postgresql://192.168.0.12:8000/<YOUR_DATABASE_name>"
                  }] ,
               "nodes" : [ {
                 "id" : "acaf62a4-41b3-4106-bf6b-2f669d88291e",
                 "status" : "200"
                    }, {
                 "id" : "d32de51e-4fcd-4e5a-a9dc-bb903abb494b",
                 "status" : "200"
                    }, {
                  "id" : "d71a4a25-c9bc-4ffd-9f4a-e422aef327f9",
                 "status" : "200"
                  } ],
              "tags":[ {
                        "key": "key1",
                        "value": "value1"
                       },
                      {
                      "key": "key2",
                      "value": "value2"
                      }],
              "user_name": "dbadmin",
              "number_of_node": 3,
              "recent_event": 6,
              "availability_zone": "eu-de-01",
              "enterprise_project_id":"aca4e50a-266f-4786-827c-f8d6cc3fbada",
              "node_type":   "dws.d1.xlarge.ultrahigh",
              "vpc_id": "85b20d7e-9eb7-4b2a-98f3-3c8843ea3574",
              "subnet_id": "374eca02-cfc4-4de7-8ab5-dbebf7d9a720",
              "public_ip": {
                  "public_bind_type": "auto_assign",
                  "eip_id": "85b20d7e-9eb7-4b2a-98f3-3c8843ea3574"
               },
             "public_endpoints": [{
                      "public_connect_info": "10.0.0.8:8000",
                      "jdbc_url": "jdbc:postgresql://10.0.0.8:8000/<YOUR_DATABASE_name>"
                  }],
              "action_progress": {"SNAPSHOTTING": "20%"},
              "sub_status": "READONLY",
              "task_status": "SNAPSHOTTING",
              "security_group_id": "dc3ec145-9029-4b39-b5a3-ace5a01f772b"
              }],
             "count":"2"
      }

-  Parameter description

   .. table:: **Table 2** Response parameter description

      +-----------+---------------------------------------------------------------------------------------------------------------------+---------------------------------+
      | Parameter | Type                                                                                                                | Description                     |
      +===========+=====================================================================================================================+=================================+
      | clusters  | Array of :ref:`ClusterInfo <en-us_topic_0000001185833140__en-us_topic_0000001145696539_table1040710342519>` objects | List of cluster objects         |
      +-----------+---------------------------------------------------------------------------------------------------------------------+---------------------------------+
      | count     | Integer                                                                                                             | Total number of cluster objects |
      +-----------+---------------------------------------------------------------------------------------------------------------------+---------------------------------+

   .. _en-us_topic_0000001185833140__en-us_topic_0000001145696539_table1040710342519:

   .. table:: **Table 3** ClusterInfo

      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter             | Type                                                                                        | Description                                                                                                                                                   |
      +=======================+=============================================================================================+===============================================================================================================================================================+
      | id                    | String                                                                                      | Cluster ID                                                                                                                                                    |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | name                  | String                                                                                      | Cluster name                                                                                                                                                  |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | status                | String                                                                                      | Cluster status. The value can be one of the following:                                                                                                        |
      |                       |                                                                                             |                                                                                                                                                               |
      |                       |                                                                                             | -  **CREATING**                                                                                                                                               |
      |                       |                                                                                             | -  **AVAILABLE**                                                                                                                                              |
      |                       |                                                                                             | -  **UNAVAILABLE**                                                                                                                                            |
      |                       |                                                                                             | -  **CREATION FAILED**                                                                                                                                        |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | version               | String                                                                                      | Data warehouse version                                                                                                                                        |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | updated               | String                                                                                      | Last modification time of a cluster. Format: ISO8601:YYYY-MM-DDThh:mm:ssZ                                                                                     |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | created               | String                                                                                      | Cluster creation time. Format: ISO8601:YYYY-MM-DDThh:mm:ssZ                                                                                                   |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | port                  | Integer                                                                                     | Service port of a cluster. The value ranges from 8000 to 30000. The default value is **8000**.                                                                |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | endpoints             | Array of :ref:`Endpoints <en-us_topic_0000001185833140__table5424631742>` objects           | Private network connection information about the cluster.                                                                                                     |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | nodes                 | Array of :ref:`Nodes <en-us_topic_0000001185833140__response_nodes>` objects                | Cluster Instance                                                                                                                                              |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | tags                  | Array of :ref:`Tags <en-us_topic_0000001185833140__table158712347513>` object               | Tags in a cluster                                                                                                                                             |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | user_name             | String                                                                                      | Username of the administrator                                                                                                                                 |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | number_of_node        | Integer                                                                                     | Number of cluster nodes. For a cluster, the value ranges from 3 to 256. For a hybrid data warehouse (standalone), the value is 1.                             |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | recent_event          | Integer                                                                                     | Number of events                                                                                                                                              |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | availability_zone     | String                                                                                      | AZ                                                                                                                                                            |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | enterprise_project_id | String                                                                                      | Enterprise project ID. The value **0** indicates the ID of the default enterprise project.                                                                    |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | node_type             | String                                                                                      | Node type                                                                                                                                                     |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | vpc_id                | String                                                                                      | VPC ID                                                                                                                                                        |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | subnet_id             | String                                                                                      | Subnet ID                                                                                                                                                     |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | public_ip             | :ref:`PublicIp <en-us_topic_0000001185833140__table1183155413517>` object                   | Public IP address. If the parameter is not specified, public connection is not used by default.                                                               |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | public_endpoints      | Array of :ref:`PublicEndpoints <en-us_topic_0000001185833140__table14398151017610>` objects | Public network connection information about the cluster. If the parameter is not specified, the public network connection information is not used by default. |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | action_progress       | Map<String,String>                                                                          | Task information, consisting of a key and a value. The key indicates an ongoing task, and the value indicates the progress of the ongoing task.               |
      |                       |                                                                                             |                                                                                                                                                               |
      |                       |                                                                                             | -  Valid key values include:                                                                                                                                  |
      |                       |                                                                                             |                                                                                                                                                               |
      |                       |                                                                                             |    -  **GROWING**                                                                                                                                             |
      |                       |                                                                                             |    -  **RESTORING**                                                                                                                                           |
      |                       |                                                                                             |    -  **SNAPSHOTTING**                                                                                                                                        |
      |                       |                                                                                             |    -  **REPAIRING**                                                                                                                                           |
      |                       |                                                                                             |    -  **CREATING**                                                                                                                                            |
      |                       |                                                                                             |                                                                                                                                                               |
      |                       |                                                                                             | -  The value indicates the task progress.                                                                                                                     |
      |                       |                                                                                             |                                                                                                                                                               |
      |                       |                                                                                             | The following is an example:                                                                                                                                  |
      |                       |                                                                                             |                                                                                                                                                               |
      |                       |                                                                                             | .. code-block::                                                                                                                                               |
      |                       |                                                                                             |                                                                                                                                                               |
      |                       |                                                                                             |    "action_progress":                                                                                                                                         |
      |                       |                                                                                             |    {"SNAPSHOTTING":"16%"}                                                                                                                                     |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | sub_status            | String                                                                                      | Sub-status of clusters in the **AVAILABLE** state. The value can be one of the following:                                                                     |
      |                       |                                                                                             |                                                                                                                                                               |
      |                       |                                                                                             | -  **NORMAL**                                                                                                                                                 |
      |                       |                                                                                             | -  **READONLY**                                                                                                                                               |
      |                       |                                                                                             | -  **REDISTRIBUTING**                                                                                                                                         |
      |                       |                                                                                             | -  **REDISTRIBUTION-FAILURE**                                                                                                                                 |
      |                       |                                                                                             | -  **UNBALANCED**                                                                                                                                             |
      |                       |                                                                                             | -  **UNBALANCED \| READONLY**                                                                                                                                 |
      |                       |                                                                                             | -  **DEGRADED**                                                                                                                                               |
      |                       |                                                                                             | -  **DEGRADED \| READONLY**                                                                                                                                   |
      |                       |                                                                                             | -  **DEGRADED \| UNBALANCED**                                                                                                                                 |
      |                       |                                                                                             | -  **UNBALANCED \| REDISTRIBUTING**                                                                                                                           |
      |                       |                                                                                             | -  **UNBALANCED \| REDISTRIBUTION-FAILURE**                                                                                                                   |
      |                       |                                                                                             | -  **READONLY \| REDISTRIBUTION-FAILURE**                                                                                                                     |
      |                       |                                                                                             | -  **UNBALANCED \| READONLY \| REDISTRIBUTION-FAILURE**                                                                                                       |
      |                       |                                                                                             | -  **DEGRADED \| REDISTRIBUTION-FAILURE**                                                                                                                     |
      |                       |                                                                                             | -  **DEGRADED \| UNBALANCED \| REDISTRIBUTION-FAILURE**                                                                                                       |
      |                       |                                                                                             | -  **DEGRADED \| UNBALANCED \| READONLY \| REDISTRIBUTION-FAILURE**                                                                                           |
      |                       |                                                                                             | -  **DEGRADED \| UNBALANCED \| READONLY**                                                                                                                     |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | task_status           | String                                                                                      | Cluster management task. The value can be one of the following:                                                                                               |
      |                       |                                                                                             |                                                                                                                                                               |
      |                       |                                                                                             | -  **RESTORING**                                                                                                                                              |
      |                       |                                                                                             | -  **SNAPSHOTTING**                                                                                                                                           |
      |                       |                                                                                             | -  **GROWING**                                                                                                                                                |
      |                       |                                                                                             | -  **REBOOTING**                                                                                                                                              |
      |                       |                                                                                             | -  **SETTING_CONFIGURATION**                                                                                                                                  |
      |                       |                                                                                             | -  **CONFIGURING_EXT_DATASOURCE**                                                                                                                             |
      |                       |                                                                                             | -  **DELETING_EXT_DATASOURCE**                                                                                                                                |
      |                       |                                                                                             | -  **REBOOT_FAILURE**                                                                                                                                         |
      |                       |                                                                                             | -  **RESIZE_FAILURE**                                                                                                                                         |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | security_group_id     | String                                                                                      | Security group ID                                                                                                                                             |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | failed_reasons        | :ref:`FailedReason <en-us_topic_0000001185833140__response_failedreason>` object            | Cause of failure. If the parameter is left empty, the cluster is in the normal state.                                                                         |
      +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. _en-us_topic_0000001185833140__table5424631742:

   .. table:: **Table 4** Endpoints

      +-----------------+-----------------+-----------------+-----------------------------------------------------------------------+
      | Parameter       | Mandatory       | Type            | Description                                                           |
      +=================+=================+=================+=======================================================================+
      | connect_info    | Yes             | String          | Private network connection information                                |
      +-----------------+-----------------+-----------------+-----------------------------------------------------------------------+
      | jdbc_url        | Yes             | String          | JDBC URL on the private network. The following is the default format: |
      |                 |                 |                 |                                                                       |
      |                 |                 |                 | jdbc:postgresql://< connect_info>/<YOUR_DATABASE_name>                |
      +-----------------+-----------------+-----------------+-----------------------------------------------------------------------+

   .. _en-us_topic_0000001185833140__response_nodes:

   .. table:: **Table 5** Nodes

      ========= ====== =======================
      Parameter Type   Description
      ========= ====== =======================
      id        String Cluster instance ID
      status    String Cluster instance status
      ========= ====== =======================

   .. _en-us_topic_0000001185833140__table158712347513:

   .. table:: **Table 6** Tags

      +-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter | Type   | Description                                                                                                                                                                                                                                                                 |
      +===========+========+=============================================================================================================================================================================================================================================================================+
      | value     | String | Value. A value can contain a maximum of 43 Unicode characters, which can be null. The first and last characters cannot be spaces. Only letters, digits, hyphens (-), and underscores (_) are allowed. It cannot contain the following characters: ``=*<>\,|/``              |
      +-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | key       | String | Key. A key can contain a maximum of 36 Unicode characters, which cannot be null. The first and last characters cannot be spaces. Only letters, digits, hyphens (-), and underscores (_) are allowed. It can contain only letters, digits, hyphens (-), and underscores (_). |
      +-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. _en-us_topic_0000001185833140__table1183155413517:

   .. table:: **Table 7** PublicIp

      +------------------+-----------------+-----------------+----------------------------------------------------------------+
      | Parameter        | Mandatory       | Type            | Description                                                    |
      +==================+=================+=================+================================================================+
      | public_bind_type | Yes             | String          | Binding type of an EIP. The value can be one of the following: |
      |                  |                 |                 |                                                                |
      |                  |                 |                 | -  auto_assign                                                 |
      |                  |                 |                 | -  **not_use**                                                 |
      |                  |                 |                 | -  **bind_existing**                                           |
      +------------------+-----------------+-----------------+----------------------------------------------------------------+
      | eip_id           | No              | String          | EIP ID                                                         |
      +------------------+-----------------+-----------------+----------------------------------------------------------------+

   .. _en-us_topic_0000001185833140__table14398151017610:

   .. table:: **Table 8** PublicEndpoints

      =================== ====== =====================================
      Parameter           Type   Description
      =================== ====== =====================================
      public_connect_info String Public network connection information
      jdbc_url            String JDBC URL of the public network
      =================== ====== =====================================

   .. _en-us_topic_0000001185833140__response_failedreason:

   .. table:: **Table 9** FailedReason

      ========== ====== =============
      Parameter  Type   Description
      ========== ====== =============
      error_code String Error code
      error_msg  String Error message
      ========== ====== =============

Returned Value
--------------

-  Normal

   200

-  Exception

   .. table:: **Table 10** Returned values

      ========================= ===========================
      Returned Value            Description
      ========================= ===========================
      400 Bad Request           Request error.
      401 Unauthorized          Authorization failed.
      403 Forbidden             No operation permission.
      404 Not Found             No resources found.
      500 Internal Server Error Internal service error.
      503 Service Unavailable   The service is unavailable.
      ========================= ===========================
