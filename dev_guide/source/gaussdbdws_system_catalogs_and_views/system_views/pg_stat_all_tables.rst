:original_name: dws_04_0758.html

.. _dws_04_0758:

PG_STAT_ALL_TABLES
==================

**PG_STAT_ALL_TABLES** displays statistics about accesses to tables in the current database, including TOAST tables.

.. table:: **Table 1** PG_STAT_ALL_TABLES columns

   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Column            | Type                     | Description                                                                                                                                                                      |
   +===================+==========================+==================================================================================================================================================================================+
   | relid             | OID                      | Table OID                                                                                                                                                                        |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | schemaname        | Name                     | Schema name of the table                                                                                                                                                         |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relname           | Name                     | Name of the table                                                                                                                                                                |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | seq_scan          | Bigint                   | Number of sequential scans started on the table                                                                                                                                  |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | seq_tup_read      | Bigint                   | Number of rows that have live data fetched by sequential scans                                                                                                                   |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | idx_scan          | Bigint                   | Number of index scans                                                                                                                                                            |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | idx_tup_fetch     | Bigint                   | Number of rows that have live data fetched by index scans                                                                                                                        |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | n_tup_ins         | Bigint                   | Number of rows inserted                                                                                                                                                          |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | n_tup_upd         | Bigint                   | Number of rows updated                                                                                                                                                           |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | n_tup_del         | Bigint                   | Number of rows deleted                                                                                                                                                           |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | n_tup_hot_upd     | Bigint                   | Number of rows updated by **HOT** (no separate index update is required)                                                                                                         |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | n_live_tup        | Bigint                   | Estimated number of live rows                                                                                                                                                    |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | n_dead_tup        | Bigint                   | Estimated number of dead rows                                                                                                                                                    |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | last_vacuum       | Timestamp with time zone | Last time at which this table was manually vacuumed (excluding **VACUUM FULL**)                                                                                                  |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | last_autovacuum   | Timestamp with time zone | Last time at which this table was automatically vacuumed                                                                                                                         |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | last_analyze      | Timestamp with time zone | Last time at which this table was analyzed                                                                                                                                       |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | last_autoanalyze  | Timestamp with time zone | Last time at which this table was automatically vacuumed                                                                                                                         |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vacuum_count      | Bigint                   | Number of vacuum operations (excluding **VACUUM FULL**)                                                                                                                          |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | autovacuum_count  | Bigint                   | Number of autovacuum operations                                                                                                                                                  |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | analyze_count     | Bigint                   | Number of **ANALYZE** operations                                                                                                                                                 |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | autoanalyze_count | Bigint                   | Number of autoanalyze operations                                                                                                                                                 |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | last_data_changed | Timestamp with time zone | Last time at which this table was updated (by **INSERT**/**UPDATE**/**DELETE** or **EXCHANGE**/**TRUNCATE**/**DROP** *partition*). This column is recorded only on the local CN. |
   +-------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example
-------

Query the last data change time in the **table_test** table:

::

   SELECT last_data_changed FROM PG_STAT_ALL_TABLES WHERE relname ='table_test';
          last_data_changed
   -------------------------------
    2024-03-27 10:28:16.277136+08
   (1 row)
