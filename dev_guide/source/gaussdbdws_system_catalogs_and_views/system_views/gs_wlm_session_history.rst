:original_name: dws_04_0705.html

.. _dws_04_0705:

GS_WLM_SESSION_HISTORY
======================

**GS_WLM_SESSION_HISTORY** displays load management information about a completed job executed by the current user on the current CN. The view is used to query data from GaussDB(DWS). The view returns the data queried from the **GS_WLM_SESSION_INFO** table within 3 minutes only ifthe GUC parameter :ref:`enable_resource_track <en-us_topic_0000001510522653__s9530ecdd2b0d4a98b67b66e32bf8e5d0>` is set to **on**.

.. _en-us_topic_0000001510283413__tb435fec1dc744bb3872aab277c2a87d8:

.. table:: **Table 1** GS_WLM_SESSION_HISTORY columns

   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Name                  | Type                     | Description                                                                                                                                                                                                                                                                                                                      |
   +=======================+==========================+==================================================================================================================================================================================================================================================================================================================================+
   | datid                 | oid                      | OID of the database this backend is connected to                                                                                                                                                                                                                                                                                 |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | dbname                | text                     | Name of the database the backend is connected to                                                                                                                                                                                                                                                                                 |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | schemaname            | text                     | Schema name                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | nodename              | text                     | Name of the CN where the statement is run                                                                                                                                                                                                                                                                                        |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | username              | text                     | User name used for connecting to the backend                                                                                                                                                                                                                                                                                     |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | application_name      | text                     | Name of the application that is connected to the backend                                                                                                                                                                                                                                                                         |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | client_addr           | inet                     | IP address of the client connected to this backend. If this column is null, it indicates either that the client is connected via a Unix socket on the server machine or that this is an internal process such as autovacuum.                                                                                                     |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | client_hostname       | text                     | Host name of the connected client, as reported by a reverse DNS lookup of **client_addr**. This column will only be non-null for IP connections, and only when **log_hostname** is enabled.                                                                                                                                      |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | client_port           | integer                  | TCP port number that the client uses for communication with this backend, or **-1** if a Unix socket is used                                                                                                                                                                                                                     |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | query_band            | text                     | Job type, which is specified by the **query_band** parameter. The default value is a null string.                                                                                                                                                                                                                                |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | block_time            | bigint                   | Duration that a statement is blocked before being executed, including the statement parsing and optimization duration. The unit is ms.                                                                                                                                                                                           |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | start_time            | timestamp with time zone | Time when the statement starts to be run                                                                                                                                                                                                                                                                                         |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | finish_time           | timestamp with time zone | Time when the statement execution ends                                                                                                                                                                                                                                                                                           |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | duration              | bigint                   | Execution time of a statement. The unit is ms.                                                                                                                                                                                                                                                                                   |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | estimate_total_time   | bigint                   | Estimated execution time of a statement. The unit is ms.                                                                                                                                                                                                                                                                         |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                | text                     | Final statement execution status. Its value can be **finished** (normal) or **aborted** (abnormal). The statement status here is the execution status of the database server. If the statement is successfully executed on the database server but an error is reported in the result set, the statement status is **finished**. |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | abort_info            | text                     | Exception information displayed if the final statement execution status is **aborted**.                                                                                                                                                                                                                                          |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_pool         | text                     | Resource pool used by the user                                                                                                                                                                                                                                                                                                   |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | control_group         | text                     | Cgroup used by the statement                                                                                                                                                                                                                                                                                                     |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | estimate_memory       | integer                  | Estimated memory used by a statement on a single instance. The unit is MB. This column takes effect only when the GUC parameter :ref:`enable_dynamic_workload <en-us_topic_0000001510522653__section15334124411419>` is set to **on**.                                                                                           |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | min_peak_memory       | integer                  | Minimum memory peak of a statement across all DNs. The unit is MB.                                                                                                                                                                                                                                                               |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | max_peak_memory       | integer                  | Maximum memory peak of a statement across all DNs. The unit is MB.                                                                                                                                                                                                                                                               |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | average_peak_memory   | integer                  | Average memory usage during statement execution. The unit is MB.                                                                                                                                                                                                                                                                 |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | memory_skew_percent   | integer                  | Memory usage skew of a statement among DNs.                                                                                                                                                                                                                                                                                      |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | spill_info            | text                     | Statement spill information on all DNs.                                                                                                                                                                                                                                                                                          |
   |                       |                          |                                                                                                                                                                                                                                                                                                                                  |
   |                       |                          | **None** indicates that the statement has not been spilled to disks on any DNs.                                                                                                                                                                                                                                                  |
   |                       |                          |                                                                                                                                                                                                                                                                                                                                  |
   |                       |                          | **All** indicates that the statement has been spilled to disks on every DN.                                                                                                                                                                                                                                                      |
   |                       |                          |                                                                                                                                                                                                                                                                                                                                  |
   |                       |                          | **[**\ *a*\ **:**\ *b*\ **]** indicates that the statement has been spilled to disks on *a* of *b* DNs.                                                                                                                                                                                                                          |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | min_spill_size        | integer                  | Minimum spilled data among all DNs when a spill occurs. The unit is MB. The default value is **0**.                                                                                                                                                                                                                              |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | max_spill_size        | integer                  | Maximum spilled data among all DNs when a spill occurs. The unit is MB. The default value is **0**.                                                                                                                                                                                                                              |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | average_spill_size    | integer                  | Average spilled data among all DNs when a spill occurs. The unit is MB. The default value is **0**.                                                                                                                                                                                                                              |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | spill_skew_percent    | integer                  | DN spill skew when a spill occurs                                                                                                                                                                                                                                                                                                |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | min_dn_time           | bigint                   | Minimum execution time of a statement across all DNs. The unit is ms.                                                                                                                                                                                                                                                            |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | max_dn_time           | bigint                   | Maximum execution time of a statement across all DNs. The unit is ms.                                                                                                                                                                                                                                                            |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | average_dn_time       | bigint                   | Average execution time of a statement across all DNs. The unit is ms.                                                                                                                                                                                                                                                            |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | dntime_skew_percent   | integer                  | Execution time skew of a statement among DNs.                                                                                                                                                                                                                                                                                    |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | min_cpu_time          | bigint                   | Minimum CPU time of a statement across all DNs. The unit is ms.                                                                                                                                                                                                                                                                  |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | max_cpu_time          | bigint                   | Maximum CPU time of a statement across all DNs. The unit is ms.                                                                                                                                                                                                                                                                  |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_cpu_time        | bigint                   | Total CPU time of a statement across all DNs. The unit is ms.                                                                                                                                                                                                                                                                    |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | cpu_skew_percent      | integer                  | CPU time skew of a statement among DNs.                                                                                                                                                                                                                                                                                          |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | min_peak_iops         | integer                  | Minimum IOPS peak of a statement across all DNs. It is counted by ones in a column-store table and by ten thousands in a row-store table.                                                                                                                                                                                        |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | max_peak_iops         | integer                  | Maximum IOPS peak of a statement across all DNs. It is counted by ones in a column-store table and by ten thousands in a row-store table.                                                                                                                                                                                        |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | average_peak_iops     | integer                  | Average IOPS peak of a statement across all DNs. It is counted by ones in a column-store table and by ten thousands in a row-store table.                                                                                                                                                                                        |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | iops_skew_percent     | integer                  | I/O skew across DNs.                                                                                                                                                                                                                                                                                                             |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | warning               | text                     | Warning. The following warnings and warnings related to SQL self-diagnosis tuning are displayed:                                                                                                                                                                                                                                 |
   |                       |                          |                                                                                                                                                                                                                                                                                                                                  |
   |                       |                          | -  Spill file size large than 256MB                                                                                                                                                                                                                                                                                              |
   |                       |                          | -  Broadcast size large than 100MB                                                                                                                                                                                                                                                                                               |
   |                       |                          | -  Early spill                                                                                                                                                                                                                                                                                                                   |
   |                       |                          | -  Spill times is greater than 3                                                                                                                                                                                                                                                                                                 |
   |                       |                          | -  Spill on memory adaptive                                                                                                                                                                                                                                                                                                      |
   |                       |                          | -  Hash table conflict                                                                                                                                                                                                                                                                                                           |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | queryid               | bigint                   | Internal query ID used for statement execution                                                                                                                                                                                                                                                                                   |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | query                 | text                     | Statement to be executed. A maximum of 64 KB of strings can be retained.                                                                                                                                                                                                                                                         |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | query_plan            | text                     | Execution plan of a statement.                                                                                                                                                                                                                                                                                                   |
   |                       |                          |                                                                                                                                                                                                                                                                                                                                  |
   |                       |                          | Specification restrictions:                                                                                                                                                                                                                                                                                                      |
   |                       |                          |                                                                                                                                                                                                                                                                                                                                  |
   |                       |                          | #. Execution plans are displayed only for DML statements.                                                                                                                                                                                                                                                                        |
   |                       |                          | #. In 8.2.1.100 and later versions, the number of data binding times is added to the execution plans of Parse Bind Execute (PBE) statements to facilitate statement analysis. The number of data binding times is displayed in the format of **PBE bind times:** *Times*.                                                        |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | node_group            | text                     | Logical cluster of the user running the statement                                                                                                                                                                                                                                                                                |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | pid                   | bigint                   | PID of the backend thread of the statement                                                                                                                                                                                                                                                                                       |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | lane                  | text                     | Fast/Slow lane where the statement is executed                                                                                                                                                                                                                                                                                   |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | unique_sql_id         | bigint                   | ID of the normalized unique SQL.                                                                                                                                                                                                                                                                                                 |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | session_id            | text                     | Unique identifier of a session in the database system. Its format is **session_start_time.tid.node_name**.                                                                                                                                                                                                                       |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | min_read_bytes        | bigint                   | Minimum I/O read bytes of a statement across all DNs. The unit is byte.                                                                                                                                                                                                                                                          |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | max_read_bytes        | bigint                   | Maximum I/O read bytes of a statement across all DNs. The unit is byte.                                                                                                                                                                                                                                                          |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | average_read_bytes    | bigint                   | Average I/O read bytes of a statement across all DNs.                                                                                                                                                                                                                                                                            |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | min_write_bytes       | bigint                   | Minimum I/O write bytes of a statement across all DNs.                                                                                                                                                                                                                                                                           |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | max_write_bytes       | bigint                   | Maximum I/O write bytes of a statement across all DNs.                                                                                                                                                                                                                                                                           |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | average_write_bytes   | bigint                   | Average I/O write bytes of a statement across all DNs.                                                                                                                                                                                                                                                                           |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | recv_pkg              | bigint                   | Total number of communication packages received by a statement across all DNs.                                                                                                                                                                                                                                                   |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | send_pkg              | bigint                   | Total number of communication packages sent by a statement across all DNs.                                                                                                                                                                                                                                                       |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | recv_bytes            | bigint                   | Total received data of the statement stream, in byte.                                                                                                                                                                                                                                                                            |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | send_bytes            | bigint                   | Total sent data of the statement stream, in byte.                                                                                                                                                                                                                                                                                |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | stmt_type             | text                     | Query type corresponding to the statement.                                                                                                                                                                                                                                                                                       |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | except_info           | text                     | Information about the exception rule triggered by the statement.                                                                                                                                                                                                                                                                 |
   +-----------------------+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
