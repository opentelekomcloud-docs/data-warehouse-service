:original_name: dws_04_0802.html

.. _dws_04_0802:

PGXC_DEADLOCK
=============

**PGXC_DEADLOCK** displays lock wait information generated due to distributed deadlocks.

Currently, **PGXC_DEADLOCK** collects only lock wait information about locks whose **locktype** is **relation**, **partition**, **page**, **tuple**, or **transactionid**.

.. table:: **Table 1** PGXC_DEADLOCK columns

   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | Column                | Type                     | Description                                                                                                             |
   +=======================+==========================+=========================================================================================================================+
   | locktype              | Text                     | Type of the locked object                                                                                               |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | nodename              | Name                     | Name of the node where the locked object resides                                                                        |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | dbname                | Name                     | Name of the database where the locked object resides. The value is **NULL** if the locked object is a transaction.      |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | nspname               | Name                     | Name of the namespace of the locked object                                                                              |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | relname               | Name                     | Name of the relation targeted by the lock. The value is **NULL** if the object is not a relation or part of a relation. |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | partname              | Name                     | Name of the partition targeted by the lock. The value is **NULL** if the locked object is not a partition.              |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | page                  | Integer                  | Number of the page targeted by the lock. The value is **NULL** if the locked object is neither a page nor a tuple.      |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | tuple                 | Smallint                 | Number of the tuple targeted by the lock. The value is **NULL** if the locked object is not a tuple.                    |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | transactionid         | Xid                      | ID of the transaction targeted by the lock. The value is **NULL** if the locked object is not a transaction.            |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | waitusername          | Name                     | Name of the user who waits for the lock                                                                                 |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | waitgxid              | Xid                      | ID of the transaction that waits for the lock                                                                           |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | waitxactstart         | Timestamp with time zone | Start time of the transaction that waits for the lock                                                                   |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | waitqueryid           | Bigint                   | Latest query ID of the thread that waits for the lock                                                                   |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | waitquery             | Text                     | Latest query statement of the thread that waits for the lock                                                            |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | waitpid               | Bigint                   | ID of the thread that waits for the lock                                                                                |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | waitmode              | Text                     | Mode of the waited lock                                                                                                 |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | holdusername          | Name                     | Name of the user who holds the lock                                                                                     |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | holdgxid              | Xid                      | ID of the transaction that holds the lock                                                                               |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | holdxactstart         | Timestamp with time zone | Start time of the transaction that holds the lock                                                                       |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | holdqueryid           | Bigint                   | Latest query ID of the thread that holds the lock                                                                       |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | holdquery             | Text                     | Latest query statement of the thread that holds the lock                                                                |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | holdpid               | Bigint                   | ID of the thread that holds the lock                                                                                    |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | holdmode              | Text                     | Mode of the held lock                                                                                                   |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | waittime              | Timestamp with time zone | Timestamp when the lock wait starts.                                                                                    |
   |                       |                          |                                                                                                                         |
   |                       |                          | This column is available only in clusters of version 9.1.0.200 or later.                                                |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
   | holdtime              | Timestamp with time zone | Timestamp when the lock starts to be held.                                                                              |
   |                       |                          |                                                                                                                         |
   |                       |                          | This column is available only in clusters of version 9.1.0.200 or later.                                                |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------+
