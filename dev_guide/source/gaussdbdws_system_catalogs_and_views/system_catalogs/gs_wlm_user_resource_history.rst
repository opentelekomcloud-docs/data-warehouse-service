:original_name: dws_04_0567.html

.. _dws_04_0567:

GS_WLM_USER_RESOURCE_HISTORY
============================

The **GS_WLM_USER_RESOURCE_HISTORY** system catalog stores information about resources used by users. The data of this table is stored on both CNs and DNs. Each record in the system table indicates the resource usage of a user at a time point, including the memory, number of CPU cores, storage space, temporary space, operator spill space, logical I/O traffic, number of logical I/O times, and logical I/O rate. The memory, CPU, and I/O monitoring items record only the resource usage of complex jobs.

Data in the **GS_WLM_USER_RESOURCE_HISTORY** system table comes from the :ref:`PG_TOTAL_USER_RESOURCE_INFO <dws_04_0790>` view.

.. table:: **Table 1** **GS_WLM_USER_RESOURCE_HISTORY** column

   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Name                  | Type                     | Description                                                                                                                                                                                                                  |
   +=======================+==========================+==============================================================================================================================================================================================================================+
   | username              | text                     | Username                                                                                                                                                                                                                     |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | timestamp             | timestamp with time zone | Timestamp                                                                                                                                                                                                                    |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | used_memory           | int                      | Memory size used by a user, in MB.                                                                                                                                                                                           |
   |                       |                          |                                                                                                                                                                                                                              |
   |                       |                          | -  DN: The memory used by users on the current DN is displayed.                                                                                                                                                              |
   |                       |                          | -  CN: The total memory usage of users on all DNs is displayed.                                                                                                                                                              |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_memory          | int                      | Memory used by the resource pool, in MB. **0** indicates that the available memory is not limited and depends on the maximum memory available in the database (**max_dynamic_memory**). A calculation formula is as follows: |
   |                       |                          |                                                                                                                                                                                                                              |
   |                       |                          | total_memory = max_dynamic_memory \* parent_percent \* user_percent                                                                                                                                                          |
   |                       |                          |                                                                                                                                                                                                                              |
   |                       |                          | CN: The sum of maximum available memory on all DNs is displayed.                                                                                                                                                             |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | used_cpu              | real                     | Number of CPU cores in use                                                                                                                                                                                                   |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_cpu             | int                      | Total number of CPU cores of the Cgroup associated with a user on the node                                                                                                                                                   |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | used_space            | bigint                   | Used storage space (unit: KB)                                                                                                                                                                                                |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_space           | bigint                   | Available storage space (unit: KB). **-1** indicates that the storage space is not limited.                                                                                                                                  |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | used_temp_space       | bigint                   | Used temporary storage space (unit: KB)                                                                                                                                                                                      |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_temp_space      | bigint                   | Available temporary storage space (unit: KB). **-1** indicates that the maximum temporary storage space is not limited.                                                                                                      |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | used_spill_space      | bigint                   | Space occupied by operators spilled to disk (unit: KB)                                                                                                                                                                       |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_spill_space     | bigint                   | Available storage space for operator spill to disk (unit: KB). The value **-1** indicates that the space is not limited.                                                                                                     |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | read_kbytes           | bigint                   | Byte traffic of read operations in a monitoring period (unit: KB)                                                                                                                                                            |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | write_kbytes          | bigint                   | Byte traffic of write operations in a monitoring period (unit: KB)                                                                                                                                                           |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | read_counts           | bigint                   | Number of read operations in a monitoring period.                                                                                                                                                                            |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | write_counts          | bigint                   | Number of write operations in a monitoring period.                                                                                                                                                                           |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | read_speed            | real                     | Byte rate of read operations in a monitoring period (unit: KB)                                                                                                                                                               |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | write_speed           | real                     | Byte rate of write operations in a monitoring period (unit: KB)                                                                                                                                                              |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | send_speed            | double                   | Network sending rate in a monitoring period, in KB/s.                                                                                                                                                                        |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | recv_speed            | double                   | Network receiving rate in a monitoring period, in KB/s.                                                                                                                                                                      |
   +-----------------------+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
