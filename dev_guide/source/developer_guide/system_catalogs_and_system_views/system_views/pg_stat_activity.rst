:original_name: dws_04_0755.html

.. _dws_04_0755:

PG_STAT_ACTIVITY
================

**PG_STAT_ACTIVITY** displays information about the current user's queries.

.. table:: **Table 1** PG_STAT_ACTIVITY columns

   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Name                  | Type                     | Description                                                                                                                                                                                                                                                                   |
   +=======================+==========================+===============================================================================================================================================================================================================================================================================+
   | datid                 | oid                      | OID of the database that the user session connects to in the backend                                                                                                                                                                                                          |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | datname               | name                     | Name of the database that the user session connects to in the backend                                                                                                                                                                                                         |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | pid                   | bigint                   | Process ID of the backend                                                                                                                                                                                                                                                     |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | usesysid              | oid                      | OID of the user logging in to the backend                                                                                                                                                                                                                                     |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | usename               | name                     | OID of the user logging in to the backend                                                                                                                                                                                                                                     |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | application_name      | text                     | Name of the application connected to the backend                                                                                                                                                                                                                              |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | client_addr           | inet                     | IP address of the client connected to the backend If this column is null, it indicates either that the client is connected via a Unix socket on the server machine or that this is an internal process such as autovacuum.                                                    |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | client_hostname       | text                     | Host name of the connected client, as reported by a reverse DNS lookup of **client_addr**. This column will only be non-null for IP connections, and only when **log_hostname** is enabled.                                                                                   |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | client_port           | integer                  | TCP port number that the client uses for communication with this backend, or **-1** if a Unix socket is used                                                                                                                                                                  |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | backend_start         | timestamp with time zone | Startup time of the backend process, that is, the time when the client connects to the server.                                                                                                                                                                                |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | xact_start            | timestamp with time zone | Time when the current transaction was started, or **NULL** if no transaction is active. If the current query is the first of its transaction, this column is equal to the **query_start** column.                                                                             |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | query_start           | timestamp with time zone | Time when the currently active query was started, or if **state** is not **active**, when the last query was started                                                                                                                                                          |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | state_change          | timestamp with time zone | Time for the last status change                                                                                                                                                                                                                                               |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | waiting               | boolean                  | Whether the backend is currently waiting on a lock. If it is, its value is **true**.                                                                                                                                                                                          |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enqueue               | text                     | Queuing status of a statement. Its value can be:                                                                                                                                                                                                                              |
   |                       |                          |                                                                                                                                                                                                                                                                               |
   |                       |                          | -  **waiting in queue**: The statement is in the queue.                                                                                                                                                                                                                       |
   |                       |                          | -  **waiting in global queue**: The statement is in the global queue.                                                                                                                                                                                                         |
   |                       |                          | -  **waiting in respool queue**: The statement is in the resource pool queue.                                                                                                                                                                                                 |
   |                       |                          | -  **waiting in ccn queue**: The job is in the CCN queue.                                                                                                                                                                                                                     |
   |                       |                          | -  **Empty**: The statement is running.                                                                                                                                                                                                                                       |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | state                 | text                     | Current overall state of this backend. Its value can be:                                                                                                                                                                                                                      |
   |                       |                          |                                                                                                                                                                                                                                                                               |
   |                       |                          | -  **active**: The backend is executing queries.                                                                                                                                                                                                                              |
   |                       |                          | -  **idle**: The backend is waiting for new client commands.                                                                                                                                                                                                                  |
   |                       |                          | -  **idle in transaction**: The backend is in a transaction, but there is no statement being executed in the transaction.                                                                                                                                                     |
   |                       |                          | -  **idle in transaction** (aborted): The backend is in a transaction, but there are statements failed in the transaction.                                                                                                                                                    |
   |                       |                          | -  **fastpath function call**: The backend is executing a fast-path function.                                                                                                                                                                                                 |
   |                       |                          | -  **disabled**: This state is reported if **track_activities** is disabled in this backend.                                                                                                                                                                                  |
   |                       |                          |                                                                                                                                                                                                                                                                               |
   |                       |                          | .. note::                                                                                                                                                                                                                                                                     |
   |                       |                          |                                                                                                                                                                                                                                                                               |
   |                       |                          |    Common users can view only their own session status. The state information of other accounts is empty. For example, after user **judy** is connected to the database, the state information of user **joe** and the initial user **omm** in **pg_stat_activity** is empty. |
   |                       |                          |                                                                                                                                                                                                                                                                               |
   |                       |                          |    .. code-block::                                                                                                                                                                                                                                                            |
   |                       |                          |                                                                                                                                                                                                                                                                               |
   |                       |                          |       SELECT datname, usename, usesysid, state,pid FROM pg_stat_activity;                                                                                                                                                                                                     |
   |                       |                          |                                                                                                                                                                                                                                                                               |
   |                       |                          |    .. code-block::                                                                                                                                                                                                                                                            |
   |                       |                          |                                                                                                                                                                                                                                                                               |
   |                       |                          |        datname  | usename | usesysid | state  |       pid                                                                                                                                                                                                                     |
   |                       |                          |       ----------+---------+----------+--------+-----------------                                                                                                                                                                                                              |
   |                       |                          |        gaussdb |  dbadmin    |       10 |        | 139968752121616                                                                                                                                                                                                            |
   |                       |                          |        gaussdb | dbadmin     |       10 |        | 139968903116560                                                                                                                                                                                                            |
   |                       |                          |        db_tpcds | judy    |    16398 | active | 139968391403280                                                                                                                                                                                                               |
   |                       |                          |        gaussdb | dbadmin     |       10 |        | 139968643069712                                                                                                                                                                                                            |
   |                       |                          |        gaussdb | dbadmin     |       10 |        | 139968680818448                                                                                                                                                                                                            |
   |                       |                          |        gaussdb | joe     |    16390 |        | 139968563377936                                                                                                                                                                                                                |
   |                       |                          |       (6 rows)                                                                                                                                                                                                                                                                |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_pool         | name                     | Resource pool used by the user                                                                                                                                                                                                                                                |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | query_id              | bigint                   | ID of a query                                                                                                                                                                                                                                                                 |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | query                 | text                     | Text of this backend's most recent query If **state** is **active**, this column shows the executing query. In all other states, it shows the last query that was executed.                                                                                                   |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | connection_info       | text                     | A string in JSON format recording the driver type, driver version, driver deployment path, and process owner of the connected database (for details, see :ref:`connection_info <en-us_topic_0000001099134530__section4834457114318>`)                                         |
   +-----------------------+--------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
