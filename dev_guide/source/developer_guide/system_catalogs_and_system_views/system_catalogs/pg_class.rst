:original_name: dws_04_0578.html

.. _dws_04_0578:

PG_CLASS
========

**PG_CLASS** records database objects and their relations.

.. table:: **Table 1** PG_CLASS columns

   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Name                  | Type                  | Description                                                                                                                                                                                                                                                                                                                                              |
   +=======================+=======================+==========================================================================================================================================================================================================================================================================================================================================================+
   | oid                   | oid                   | Row identifier (hidden attribute; must be explicitly selected)                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relname               | name                  | Name of an object, such as a table, index, or view                                                                                                                                                                                                                                                                                                       |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relnamespace          | oid                   | OID of the namespace that contains the relationship                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | reltype               | oid                   | Data type that corresponds to this table's row type (the index is 0 because the index does not have **pg_type** record)                                                                                                                                                                                                                                  |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | reloftype             | oid                   | OID is of composite type. **0** indicates other types.                                                                                                                                                                                                                                                                                                   |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relowner              | oid                   | Owner of the relationship                                                                                                                                                                                                                                                                                                                                |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relam                 | oid                   | Specifies the access method used, such as B-tree and hash, if this is an index                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relfilenode           | oid                   | Name of the on-disk file of this relationship. If such file does not exist, the value is **0**.                                                                                                                                                                                                                                                          |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | reltablespace         | oid                   | Tablespace in which this relationship is stored. If its value is **0**, the default tablespace in this database is used. This column is meaningless if the relationship has no on-disk file.                                                                                                                                                             |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relpages              | double precision      | Size of the on-disk representation of this table in pages (of size BLCKSZ). This is only an estimate used by the optimizer.                                                                                                                                                                                                                              |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | reltuples             | double precision      | Number of rows in the table. This is only an estimate used by the optimizer.                                                                                                                                                                                                                                                                             |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relallvisible         | integer               | Number of pages marked as all visible in the table. This column is used by the optimizer for optimizing SQL execution. It is updated by **VACUUM**, **ANALYZE**, and a few DDL statements such as **CREATE INDEX**.                                                                                                                                      |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | reltoastrelid         | oid                   | OID of the TOAST table associated with this table. The OID is 0 if no TOAST table exists.                                                                                                                                                                                                                                                                |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | The TOAST table stores large columns "offline" in a secondary table.                                                                                                                                                                                                                                                                                     |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | reltoastidxid         | oid                   | OID of the index for a TOAST table. The OID is 0 for a table other than a TOAST table.                                                                                                                                                                                                                                                                   |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | reldeltarelid         | oid                   | OID of a Delta table                                                                                                                                                                                                                                                                                                                                     |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | Delta tables belong to column-store tables. They store long tail data generated during data import.                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | reldeltaidx           | oid                   | OID of the index for a Delta table                                                                                                                                                                                                                                                                                                                       |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relcudescrelid        | oid                   | OID of a CU description table                                                                                                                                                                                                                                                                                                                            |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | CU description tables (Desc tables) belong to column-store tables. They control whether storage data in the HDFS table directory is visible.                                                                                                                                                                                                             |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relcudescidx          | oid                   | OID of the index for a CU description table                                                                                                                                                                                                                                                                                                              |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relhasindex           | boolean               | Its value is **true** if this column is a table and has (or recently had) at least one index.                                                                                                                                                                                                                                                            |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | It is set by **CREATE INDEX** but is not immediately cleared by **DROP INDEX**. If the **VACUUM** process detects that a table has no index, it clears the **relhasindex** column and sets the value to **false**.                                                                                                                                       |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relisshared           | boolean               | Its value is **true** if the table is shared across all databases in the cluster. Only certain system catalogs (such as **pg_database**) are shared.                                                                                                                                                                                                     |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relpersistence        | "char"                | -  **p** indicates a permanent table.                                                                                                                                                                                                                                                                                                                    |
   |                       |                       | -  **u** indicates a non-log table.                                                                                                                                                                                                                                                                                                                      |
   |                       |                       | -  **t** indicates a temporary table.                                                                                                                                                                                                                                                                                                                    |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relkind               | "char"                | -  **r** indicates an ordinary table.                                                                                                                                                                                                                                                                                                                    |
   |                       |                       | -  **i** indicates an index.                                                                                                                                                                                                                                                                                                                             |
   |                       |                       | -  **S** indicates a sequence.                                                                                                                                                                                                                                                                                                                           |
   |                       |                       | -  **v** indicates a view.                                                                                                                                                                                                                                                                                                                               |
   |                       |                       | -  **c** indicates the composite type.                                                                                                                                                                                                                                                                                                                   |
   |                       |                       | -  **t** indicates a TOAST table.                                                                                                                                                                                                                                                                                                                        |
   |                       |                       | -  **f** indicates a foreign table.                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relnatts              | smallint              | Number of user columns in the relationship (excluding system columns) **pg_attribute** has the same number of rows corresponding to the user columns.                                                                                                                                                                                                    |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relchecks             | smallint              | Number of constraints on a table. For details, see :ref:`PG_CONSTRAINT <dws_04_0580>`.                                                                                                                                                                                                                                                                   |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relhasoids            | boolean               | Its value is **true** if an OID is generated for each row of the relationship.                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relhaspkey            | boolean               | Its value is **true** if the table has (or once had) a primary key.                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relhasrules           | boolean               | Its value is **true** if the table has rules. See table :ref:`PG_REWRITE <dws_04_0614>` to check whether it has rules.                                                                                                                                                                                                                                   |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relhastriggers        | boolean               | Its value is **true** if the table has (or once had) triggers. See :ref:`PG_TRIGGER <dws_04_0623>`.                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relhassubclass        | boolean               | Its value is **true** if the table has (or once had) any inheritance child table.                                                                                                                                                                                                                                                                        |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relcmprs              | tinyint               | Whether the compression feature is enabled for the table. Note that only batch insertion triggers compression so ordinary CRUD does not trigger compression.                                                                                                                                                                                             |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | -  **0** indicates other tables that do not support compression (primarily system tables, on which the compression attribute cannot be modified).                                                                                                                                                                                                        |
   |                       |                       | -  **1** indicates that the compression feature of the table data is NOCOMPRESS or has no specified keyword.                                                                                                                                                                                                                                             |
   |                       |                       | -  **2** indicates that the compression feature of the table data is COMPRESS.                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relhasclusterkey      | boolean               | Whether the local cluster storage is used                                                                                                                                                                                                                                                                                                                |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relrowmovement        | boolean               | Whether the row migration is allowed when the partitioned table is updated                                                                                                                                                                                                                                                                               |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | -  **true** indicates that the row migration is allowed.                                                                                                                                                                                                                                                                                                 |
   |                       |                       | -  **false** indicates that the row migration is not allowed.                                                                                                                                                                                                                                                                                            |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | parttype              | "char"                | Whether the table or index has the property of a partitioned table                                                                                                                                                                                                                                                                                       |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | -  **p** indicates that the table or index has the property of a partitioned table.                                                                                                                                                                                                                                                                      |
   |                       |                       | -  **n** indicates that the table or index does not have the property of a partitioned table.                                                                                                                                                                                                                                                            |
   |                       |                       | -  **v** indicates that the table is the value partitioned table in the HDFS.                                                                                                                                                                                                                                                                            |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relfrozenxid          | xid32                 | All transaction IDs before this one have been replaced with a permanent ("frozen") transaction ID in this table. This column is used to track whether the table needs to be vacuumed in order to prevent transaction ID wraparound (or to allow **pg_clog** to be shrunk). The value is 0 (**InvalidTransactionId**) if the relationship is not a table. |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | To ensure forward compatibility, this column is reserved. The **relfrozenxid64** column is added to record the information.                                                                                                                                                                                                                              |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relacl                | aclitem[]             | Access permissions                                                                                                                                                                                                                                                                                                                                       |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | The command output of the query is as follows:                                                                                                                                                                                                                                                                                                           |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | ::                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       |    rolename=xxxx/yyyy  --Assigning privileges to a role                                                                                                                                                                                                                                                                                                  |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | ::                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       |    =xxxx/yyyy --Assigning the permission to public                                                                                                                                                                                                                                                                                                       |
   |                       |                       |                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                       | *xxxx* indicates the assigned privileges, and *yyyy* indicates the roles that are assigned to the privileges. For details about permission descriptions, see :ref:`Table 2 <en-us_topic_0000001099134762__teb11e17087cf4090985c04b03f3e2336>`.                                                                                                           |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | reloptions            | text[]                | Access-method-specific options, as "keyword=value" strings                                                                                                                                                                                                                                                                                               |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | relfrozenxid64        | xid                   | All transaction IDs before this one have been replaced with a permanent ("frozen") transaction ID in this table. This column is used to track whether the table needs to be vacuumed in order to prevent transaction ID wraparound (or to allow **pg_clog** to be shrunk). The value is 0 (**InvalidTransactionId**) if the relationship is not a table. |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000001099134762__teb11e17087cf4090985c04b03f3e2336:

.. table:: **Table 2** Description of privileges

   ========= ===============================================
   Parameter Description
   ========= ===============================================
   r         SELECT (read)
   w         UPDATE (write)
   a         INSERT (insert)
   d         DELETE
   D         TRUNCATE
   x         REFERENCES
   t         TRIGGER
   X         EXECUTE
   U         USAGE
   C         CREATE
   c         CONNECT
   T         TEMPORARY
   A         ANALYZE|ANALYSE
   arwdDxtA  ALL PRIVILEGES (used for tables)
   \*        Authorization options for preceding permissions
   ========= ===============================================

Examples
--------

View the OID and relfilenode of a table.

::

   select oid,relname,relfilenode from pg_class where relname = 'table_name';

Count row-store tables.

::

   select 'row count:'||count(1) as point from pg_class where relkind = 'r' and oid > 16384 and reloptions::text not like '%column%' and reloptions::text not like '%internal_mask%';

Count column-store tables.

::

   select 'column count:'||count(1) as point from pg_class where relkind = 'r' and oid > 16384 and reloptions::text like '%column%';
