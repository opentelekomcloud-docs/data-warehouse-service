:original_name: dws_04_0635.html

.. _dws_04_0635:

PGXC_NODE
=========

**PGXC_NODE** records information about cluster nodes.

.. table:: **Table 1** PGXC_NODE columns

   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | Name                  | Type                  | Description                                                                                                                                        |
   +=======================+=======================+====================================================================================================================================================+
   | node_name             | name                  | Node name                                                                                                                                          |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | node_type             | "char"                | Node type                                                                                                                                          |
   |                       |                       |                                                                                                                                                    |
   |                       |                       | **C**: CN                                                                                                                                          |
   |                       |                       |                                                                                                                                                    |
   |                       |                       | **D**: DN                                                                                                                                          |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | node_port             | integer               | Port ID of the node                                                                                                                                |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | node_host             | name                  | Host name or IP address of a node. (If a virtual IP address is configured, its value is a virtual IP address.)                                     |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | node_port1            | integer               | Port number of a replication node                                                                                                                  |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | node_host1            | name                  | Host name or IP address of a replication node. (If a virtual IP address is configured, its value is a virtual IP address.)                         |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | hostis_primary        | boolean               | Whether a switchover occurs between the primary and the standby server on the current node                                                         |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | nodeis_primary        | boolean               | Whether the current node is preferred to execute non-query operations in the **replication** table                                                 |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | nodeis_preferred      | boolean               | Whether the current node is preferred to execute queries in the **replication** table                                                              |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | node_id               | integer               | Node identifier                                                                                                                                    |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | sctp_port             | integer               | Specifies the port used by the TCP proxy communication library or SCTP communication library of the primary node to listen to the data channel.    |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | control_port          | integer               | Specifies the port used by the TCP proxy communication library or SCTP communication library of the primary node to listen to the control channel. |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | sctp_port1            | integer               | Specifies the port used by the TCP proxy communication library or SCTP communication library of the standby node to listen to the data channel.    |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | control_port1         | integer               | Specifies the port used by the TCP proxy communication library or SCTP communication library of the standby node to listen to the control channel. |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | nodeis_central        | boolean               | Indicates that the current node is the central node.                                                                                               |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+

Example
-------

Query the number of DNs on a node:

::

   SELECT count(node_name),node_host FROM pgxc_node WHERE node_type='D' GROUP BY 2;
    count |   node_host
   -------+---------------
        1 | 192.**.**.10
        1 | 192.**.**.11
        1 | 192.**.**.12
   (3 rows)

Query the CN and DN information of the cluster:

::

   SELECT * FROM pgxc_node;
     node_name   | node_type | node_port |   node_host    | node_port1 |   node_host1   | hostis_primary | nodeis_primary | nodeis_preferred
    |   node_id   | sctp_port | control_port | sctp_port1 | control_port1 | nodeis_central
   --------------+-----------+-----------+----------------+------------+----------------+----------------+----------------+-----------------
   -+-------------+-----------+--------------+------------+---------------+----------------
    dn_6001_6002 | D         |     40000 | 192.**.***.**1 |      45000 | 192.**.**.**2  | t              | f              | f
    |  1644780306 |     40002 |        40003 |      45002 |         45003 | f
    dn_6003_6004 | D         |     40000 | 192.**.**.**2  |      45000 | 192.**.**.**3  | t              | f              | f
    |  -966646068 |     40002 |        40003 |      45002 |         45003 | f
    dn_6005_6006 | D         |     40000 | 192.**.**.**3  |      45000 | 192.**.***.**1 | t              | f              | f
    |   868850011 |     40002 |        40003 |      45002 |         45003 | f
    cn_5001      | C         |      8000 | 192.**.***.**1 |       8000 | 192.**.***.**1 | t              | f              | f
    |  1120683504 |      8002 |         8003 |          0 |             0 | f
    cn_5002      | C         |      8000 | 192.**.**.**2  |       8000 | 192.**.**.**2  | t              | f              | f
    | -1736975100 |      8002 |         8003 |          0 |             0 | f
    cn_5003      | C         |      8000 | localhost      |       8000 | localhost      | t              | f              | f
    |  -125853378 |      8002 |         8003 |          0 |             0 | t
   (6 rows)
