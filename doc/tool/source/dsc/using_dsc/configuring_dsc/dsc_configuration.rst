:original_name: dws_16_0013.html

.. _dws_16_0013:

DSC Configuration
=================

Configure the following items:

-  :ref:`Setting application.properties <en-us_topic_0000001860198709__en-us_topic_0000001382367698_section1939611146913>`: Configure the migration behavior of DSC, for example, whether to overwrite the files in the target folder and whether to format the SQL files.
-  :ref:`Setting Java Memory Allocation <en-us_topic_0000001860198709__en-us_topic_0000001382367698_section1724815444492>`: Configure the memory that can be used by DSC. If the memory usage exceeds the threshold, DSC displays an error and exits.

.. _en-us_topic_0000001860198709__en-us_topic_0000001382367698_section1939611146913:

Setting application.properties
------------------------------

The **application.properties** file contains DSC behavior parameters, which are applicable to Teradata, Oracle.

Perform the following steps to configure the parameters:

#. Open the **application.properties** file in the **config** folder.

#. Set parameters in the **application.properties** file as needed.

   :ref:`Table 1 <en-us_topic_0000001860198709__en-us_topic_0000001382367698_table60771938143352>` describes the parameters in the **application.properties** file.

   .. note::

      -  Parameter values are case-insensitive.
      -  Do not modify any other parameter except the listed ones.

#. Save the configuration and exit.

.. _en-us_topic_0000001860198709__en-us_topic_0000001382367698_table60771938143352:

.. table:: **Table 1** Parameters in the application.properties file

   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | Parameter                  | Description                                                                                                                                                                                                                                                                                                           | Value Range                             | Default Value           | Example                                                             |
   +============================+=======================================================================================================================================================================================================================================================================================================================+=========================================+=========================+=====================================================================+
   | -  formatterrequired       | If there are any changes in this configuration item, then the tool will not function as expected.                                                                                                                                                                                                                     | -  true                                 | true                    | formatterrequired=true                                              |
   |                            |                                                                                                                                                                                                                                                                                                                       | -  false                                |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  prevalidationFlag       | If there are any changes in this configuration item, then the tool will not function as expected.                                                                                                                                                                                                                     | -  true                                 | true                    | prevalidationFlag=true                                              |
   |                            |                                                                                                                                                                                                                                                                                                                       | -  false                                |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  commentSeparatorFlag    | If there are any changes in this configuration item, then the tool will not function as expected.                                                                                                                                                                                                                     | -  true                                 | true                    | commentSeparatorFlag=true                                           |
   |                            |                                                                                                                                                                                                                                                                                                                       | -  false                                |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  queryDelimiter          | If there are any changes in this configuration item, then the tool will not function as expected.                                                                                                                                                                                                                     | N/A                                     | N/A                     | queryDelimiter=;                                                    |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  blogicDelimiter         | If there are any changes in this configuration item, then the tool will not function as expected.                                                                                                                                                                                                                     | N/A                                     | N/A                     | blogicDelimiter=/                                                   |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  Timeout                 | Tool migration timeout duration.                                                                                                                                                                                                                                                                                      | ``-``                                   | 4 hours                 | Timeout=4                                                           |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | If there are any changes in this configuration item, then the tool will not function as expected.                                                                                                                                                                                                                     |                                         |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  fileExtension           | Valid file extension separated by comma.                                                                                                                                                                                                                                                                              | -  csv                                  | SQL                     | fileExtension=SQL                                                   |
   |                            |                                                                                                                                                                                                                                                                                                                       | -  txt                                  |                         |                                                                     |
   |                            | If there are any modifications in this configuration item, then the tool will not function as expected.                                                                                                                                                                                                               | -  SQL                                  |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | .. note::                                                                                                                                                                                                                                                                                                             |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |    The exported scripts must be with the following postfix such as:                                                                                                                                                                                                                                                   |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |    -  .sql                                                                                                                                                                                                                                                                                                            |                                         |                         |                                                                     |
   |                            |    -  .txt                                                                                                                                                                                                                                                                                                            |                                         |                         |                                                                     |
   |                            |    -  .fnc                                                                                                                                                                                                                                                                                                            |                                         |                         |                                                                     |
   |                            |    -  .proc                                                                                                                                                                                                                                                                                                           |                                         |                         |                                                                     |
   |                            |    -  .tbl                                                                                                                                                                                                                                                                                                            |                                         |                         |                                                                     |
   |                            |    -  .tbs                                                                                                                                                                                                                                                                                                            |                                         |                         |                                                                     |
   |                            |    -  .pl                                                                                                                                                                                                                                                                                                             |                                         |                         |                                                                     |
   |                            |    -  .dsql                                                                                                                                                                                                                                                                                                           |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |    and so on.                                                                                                                                                                                                                                                                                                         |                                         |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  formattedSourceRequired | Whether to use SQL Formatter to format the source SQL files.                                                                                                                                                                                                                                                          | -  true                                 | true                    | formattedSourceRequired=true                                        |
   |                            |                                                                                                                                                                                                                                                                                                                       | -  false                                |                         |                                                                     |
   |                            | If this parameter is set to **true**, the copies of the input files are formatted and saved to the *Output path*\ **/formattedSource** directory.                                                                                                                                                                     |                                         |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  target_files            | Specifies the operations to be performed on the output folder.                                                                                                                                                                                                                                                        | -  overwrite                            | overwrite               | target_files=overwrite                                              |
   |                            |                                                                                                                                                                                                                                                                                                                       | -  delete                               |                         |                                                                     |
   |                            | **Overwrite**:                                                                                                                                                                                                                                                                                                        | -  cancel                               |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | This option specifies whether the files in the output folder must be overwritten.                                                                                                                                                                                                                                     |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | **Delete**: deletes all files in the output folder.                                                                                                                                                                                                                                                                   |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | **Cancel**: cancels an operation on the output folder that contains files.                                                                                                                                                                                                                                            |                                         |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  encodingFormat          | Encoding format of input files.                                                                                                                                                                                                                                                                                       | -  UTF8                                 | Default based on locale | encodingFormat=UTF8                                                 |
   |                            |                                                                                                                                                                                                                                                                                                                       | -  UTF16                                |                         |                                                                     |
   |                            | If this parameter is not set (or is commented out), DSC uses the default encoding format based on locale settings.                                                                                                                                                                                                    | -  UTF32                                |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       | -  GB2312                               |                         |                                                                     |
   |                            | .. note::                                                                                                                                                                                                                                                                                                             | -  ASCII and others                     |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |    -  The auto detection of file encoding is inaccurate. To ensure that the correct encoding format is used, specify the format using this parameter.                                                                                                                                                                 |                                         |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  NoOfThreads             | Number of threads used for migration                                                                                                                                                                                                                                                                                  | Depending on available system resources | 3                       | NoOfThreads=3                                                       |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  MaxFileSizeWarning      | Warning threshold for the input file size (unit: KB, MB, or GB).                                                                                                                                                                                                                                                      | 10 KB~1 GB                              | 10MB                    | MaxFileSizeWarning=10MB                                             |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | If an invalid value is specified, the default value is used.                                                                                                                                                                                                                                                          |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | The following warning will be displayed if the specified source file size exceeds the threshold:                                                                                                                                                                                                                      |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | .. code-block::                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |    *****************                                                                                                                                                                                                                                                                                                  |                                         |                         |                                                                     |
   |                            |    [WARNING] : Migration of the following files(>100KB) will take more time:                                                                                                                                                                                                                                          |                                         |                         |                                                                     |
   |                            |    bigfile001.SQL                                                                                                                                                                                                                                                                                                     |                                         |                         |                                                                     |
   |                            |    bigfile008.SQL                                                                                                                                                                                                                                                                                                     |                                         |                         |                                                                     |
   |                            |    *****************                                                                                                                                                                                                                                                                                                  |                                         |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  MaxFileSize             | Maximum size of the input file allowed. If crossing this limit, the file migration will be skipped.                                                                                                                                                                                                                   | ``-``                                   | 20MB                    | MaxFileSize=20MB                                                    |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  MaxSqlLen               | Maximum size of a query to be migrated.                                                                                                                                                                                                                                                                               | 1 .. 52,428,800 bytes                   | 1048576                 | MaxSqlLen=1048576                                                   |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | If an invalid value is specified, DSC resets it to the default value and displays the following warning:                                                                                                                                                                                                              | (1 byte to 50 MB)                       | (1 MB)                  |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | .. code-block::                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |    The query length parameter (MaxSqlLen) value is out of range. Resetting to default value.                                                                                                                                                                                                                          |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | If an input query exceeds the specified maximum length, the pre-validation of the query migration will fail. DSC skips this query and logs the following error:                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            | .. code-block::                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |    2018-07-06 12:05:57,598 ERROR TeradataBulkHandler:195 Error occurred during processing of input in Bulk Migration. PreQueryValidation failed due to: Invalid termination; OR exclude keyword found in query; OR query exceeds maximum length (MaxSqlLen config parameter). filename.SQL for Query in position : xx |                                         |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  initialJVMMemory        | Initial memory                                                                                                                                                                                                                                                                                                        | N/A                                     | 256 MB                  | initialJVMMemory=256MB                                              |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         | This indicates that the process will start up with 256 MB of memory |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  maxJVMMemory            | Maximum memory                                                                                                                                                                                                                                                                                                        | N/A                                     | 1024 MB                 | maxJVMMemory=2048m                                                  |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         |                                                                     |
   |                            |                                                                                                                                                                                                                                                                                                                       |                                         |                         | This indicates that the process will use up to 2048 MB of memory.   |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+
   | -  executesqlingauss       | Runs the migrated scripts in GaussDB(DWS). The value can be true or false. The script can be executed only on the server running the Linux operating system.                                                                                                                                                          | -  true                                 | false                   | executesqlingauss=false                                             |
   |                            |                                                                                                                                                                                                                                                                                                                       | -  false                                |                         |                                                                     |
   +----------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------+-------------------------+---------------------------------------------------------------------+

.. note::

   -  If a parameter is set to an incorrect or invalid value, DSC uses the default value of the parameter.
   -  If the extensions (for example, **.doc**) are not supported, then it is recommended you add extension in **fileExtension** configuration parameter in **application.properties** file.

.. _en-us_topic_0000001860198709__en-us_topic_0000001382367698_section1724815444492:

Setting Java Memory Allocation
------------------------------

DSC has preset settings for the memory allocation of the Java Virtual Machine (JVM).

If the memory usage exceeds the limit during migration, DSC displays the "java.lang.OutOfMemoryError: GC overhead limit exceeded" error and exit. In this case, you can increase the values of **initialJVMMemory** and **maxJVMMemory** in the **application.properties** file to allocate more memory.

.. note::

   The available system resources also determine the memory allocation.

.. table:: **Table 2** Parameters for JVM memory allocation

   +-----------------------+----------------------------------------------+--------------------------------------------------------------------------------------------+
   | Parameter             | Description                                  | Recommended Value                                                                          |
   +=======================+==============================================+============================================================================================+
   | Xms                   | Initial memory allocation (unit: MB)         | The minimum value is 256 MB. The maximum value depends on the available system resources.  |
   |                       |                                              |                                                                                            |
   |                       |                                              | Default value: **256**                                                                     |
   +-----------------------+----------------------------------------------+--------------------------------------------------------------------------------------------+
   | Xmx                   | Upper limit for memory allocation (unit: MB) | The minimum value is 1024 MB. The maximum value depends on the available system resources. |
   |                       |                                              |                                                                                            |
   |                       |                                              | Default value: **1024**                                                                    |
   +-----------------------+----------------------------------------------+--------------------------------------------------------------------------------------------+

Open the **gaussdb.properties** file in the **config** folder of the verification file and configure parameters by referring to :ref:`Table 3 <en-us_topic_0000001860198709__en-us_topic_0000001382367698_table18539728123518>` to connect to GaussDB(DWS).

.. _en-us_topic_0000001860198709__en-us_topic_0000001382367698_table18539728123518:

.. table:: **Table 3** Parameters in the gaussdb.properties file

   +--------------+----------------------------------------------------+-------------+---------+-------------+
   | Parameter    | Description                                        | Value Range | Default | Example     |
   +==============+====================================================+=============+=========+=============+
   | gaussdb-user | GaussDB(DWS) database user who has all permissions | N/A         | N/A     | user1       |
   +--------------+----------------------------------------------------+-------------+---------+-------------+
   | gaussdb-port | Port of the GaussDB(DWS) database                  | N/A         | N/A     | 8000        |
   +--------------+----------------------------------------------------+-------------+---------+-------------+
   | gaussdb-name | Name of the GaussDB(DWS) database                  | N/A         | N/A     | gaussdb     |
   +--------------+----------------------------------------------------+-------------+---------+-------------+
   | gaussdb-ip   | IP address of the GaussDB(DWS) database            | N/A         | N/A     | 10.XX.XX.XX |
   +--------------+----------------------------------------------------+-------------+---------+-------------+
