:original_name: dws_mt_0029.html

.. _dws_mt_0029:

Teradata Perl Configuration
===========================

Teradata Perl parameters are used to customize rules for Teradata Perl script migration.

Open the **perl-migration.properties** file in the **config** folder and set parameters in :ref:`Table 1 <en-us_topic_0000001188202574__en-us_topic_0218440394_table60771938143352>` as required.

.. note::

   -  Parameter values are case-insensitive.
   -  You can modify value of the following two parameters **db-bteq-tag-name** and **db-tdsql-tag-name** parameters in the following table:

.. _en-us_topic_0000001188202574__en-us_topic_0218440394_table60771938143352:

.. table:: **Table 1** Parameters in the perl-migration.properties file

   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
   | Parameter                                                                     | Description                                                                                                                                                                                                              | Value Range | Default Value | Example                        |
   +===============================================================================+==========================================================================================================================================================================================================================+=============+===============+================================+
   | -  .. _en-us_topic_0000001188202574__en-us_topic_0218440394_li147773406162:   | Scripts to be processed in Perl files.                                                                                                                                                                                   | -  bteq     | bteq          | db-bteq-tag-name=bteq          |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |    db-bteq-tag-name                                                           | **BTEQ**: Only the scripts under the **BTEQ** tag will be processed.                                                                                                                                                     |             |               |                                |
   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
   | -  .. _en-us_topic_0000001188202574__en-us_topic_0218440394_li132693018413:   | Only the scripts under the **db-tdsql-tag-name** tag will be processed.                                                                                                                                                  | sql_lang    | sql_lang      | db-tdsql-tag-name=sql_lang     |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |    db-tdsql-tag-name                                                          | **SQL_LANG:** Only the scripts under the **SQL_LANG** tag will be processed.                                                                                                                                             |             |               |                                |
   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
   | -  add-timing-on                                                              | Whether to enable the insertion of scripts to calculate execution time.                                                                                                                                                  | -  true     | false         | add-timing-on=true             |
   |                                                                               |                                                                                                                                                                                                                          | -  false    |               |                                |
   |                                                                               | If it is enabled, the script will be added to each input file.                                                                                                                                                           |             |               |                                |
   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
   | -  remove-intermediate-files                                                  | Whether to delete the intermediate SQL file generated by the DSC after the migration is complete.                                                                                                                        | -  true     | true          | remove-intermediate-files=true |
   |                                                                               |                                                                                                                                                                                                                          | -  false    |               |                                |
   |                                                                               | The intermediate files contain the **BTEQ** and **SQL_LANG** syntax in SQL files. These files are used as input for DSC.                                                                                                 |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **true**: Delete the intermediate files.                                                                                                                                                                                 |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **false**: Do not delete the intermediate files.                                                                                                                                                                         |             |               |                                |
   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
   | -  .. _en-us_topic_0000001188202574__en-us_topic_0218440394_li1148411265916:  | Whether to enable the migration of Perl variables containing SQL statements.                                                                                                                                             | -  true     | true          | migrate-variables=true         |
   |                                                                               |                                                                                                                                                                                                                          | -  false    |               |                                |
   |    migrate-variables                                                          | Perl files can contain Perl variables with SQL statements. These variables are executed by using the **PREPARE** and **EXECUTE** statement in Perl. DSC can extract SQL statements from Perl variables and migrate them. |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **true**: enables the migration of **Perl** variables containing SQL statements.                                                                                                                                         |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **false**: disables the migration of **Perl** variables containing SQL statements.                                                                                                                                       |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | Example 1:                                                                                                                                                                                                               |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **migrate-variables** is set to **true** and input is as follows:                                                                                                                                                        |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | ::                                                                                                                                                                                                                       |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |    $V_SQL = "CT X1(C1 INT,C2 CHAR(30))";                                                                                                                                                                                 |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **Output**                                                                                                                                                                                                               |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | ::                                                                                                                                                                                                                       |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |    CREATE TABLE X1(C1 INT,C2 CHAR(30));                                                                                                                                                                                  |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | Example 2:                                                                                                                                                                                                               |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **Input**                                                                                                                                                                                                                |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | ::                                                                                                                                                                                                                       |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |    $onesql ="SELECT trim(tablename) from dbc.tables                                                                                                                                                                      |             |               |                                |
   |                                                                               |               WHERE databasename = '${AUTO_DQDB}' and tablename like 'V_%'                                                                                                                                               |             |               |                                |
   |                                                                               |               order by 1;";                                                                                                                                                                                              |             |               |                                |
   |                                                                               |      $sth_rundq = $dbh->execute_query($onesql);                                                                                                                                                                          |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **Output**                                                                                                                                                                                                               |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | ::                                                                                                                                                                                                                       |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |      $onesql ="SELECT                                                                                                                                                                                                    |             |               |                                |
   |                                                                               |              TRIM( tablename )                                                                                                                                                                                           |             |               |                                |
   |                                                                               |         FROM                                                                                                                                                                                                             |             |               |                                |
   |                                                                               |              dbc.tables                                                                                                                                                                                                  |             |               |                                |
   |                                                                               |         WHERE                                                                                                                                                                                                            |             |               |                                |
   |                                                                               |              databasename = '${AUTO_DQDB}'                                                                                                                                                                               |             |               |                                |
   |                                                                               |              AND tablename LIKE 'V_%'                                                                                                                                                                                    |             |               |                                |
   |                                                                               |         ORDER BY                                                                                                                                                                                                         |             |               |                                |
   |                                                                               |              1                                                                                                                                                                                                           |             |               |                                |
   |                                                                               |    ;                                                                                                                                                                                                                     |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |    ";                                                                                                                                                                                                                    |             |               |                                |
   |                                                                               |      $sth_rundq = $dbh->execute_query($onesql);                                                                                                                                                                          |             |               |                                |
   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
   | -  .. _en-us_topic_0000001188202574__en-us_topic_0218440394_li0844101162312:  | Logging level of Teradata Perl migration log files.                                                                                                                                                                      | -  error    | info          | logging-level=info             |
   |                                                                               |                                                                                                                                                                                                                          | -  warning  |               |                                |
   |    logging-level                                                              | **error**: Log only errors.                                                                                                                                                                                              | -  info     |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **warning**: Log errors and warnings.                                                                                                                                                                                    |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **info**: Log errors, warnings, and activity information. This level contains all log information.                                                                                                                       |             |               |                                |
   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
   | -  log-file-count                                                             | Maximum number of log files retained, including the log files in use and archived log files.                                                                                                                             | 3 - 10      | 5             | log-file-count=10              |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | If the number of log files exceeds the upper limit, the earliest files will be deleted until the new log files are successfully archived.                                                                                |             |               |                                |
   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
   | -  log-file-size                                                              | Maximum file size.                                                                                                                                                                                                       | 1MB - 10MB  | 5MB           | log-file-size=10MB             |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | Upon reaching the specified size, a file is archived by adding a timestamp to the file name.                                                                                                                             |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | Example:                                                                                                                                                                                                                 |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | .. code-block::                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |    perlDSC_2018-07-08_16_12_08.log                                                                                                                                                                                       |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | After the archiving, a new log file *perlDSC.log* with a timestamp is generated.                                                                                                                                         |             |               |                                |
   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
   | -  migrate-executequery                                                       | Whether to enable the migration of **execute_query** containing SQL statements.                                                                                                                                          | -  true     | true          | migrate-executequery =true     |
   |                                                                               |                                                                                                                                                                                                                          | -  false    |               |                                |
   |                                                                               | **true**: enables the migration of **execute_query** containing SQL statements.                                                                                                                                          |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **false**: disables the migration of **execute_query** containing SQL statements.                                                                                                                                        |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | For example:                                                                                                                                                                                                             |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **migrate-executequery** is set to **true** and input is as follows:                                                                                                                                                     |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | ::                                                                                                                                                                                                                       |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |    my $rows1=$conn1->execute_query("sel ${selectclause} from ${databasename}.${tablename};                                                                                                                               |             |               |                                |
   |                                                                               |             ");                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | **Output**                                                                                                                                                                                                               |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               | ::                                                                                                                                                                                                                       |             |               |                                |
   |                                                                               |                                                                                                                                                                                                                          |             |               |                                |
   |                                                                               |    my $rows1=$conn1->execute_query("SELECT                                                                                                                                                                               |             |               |                                |
   |                                                                               |              ${selectclause}                                                                                                                                                                                             |             |               |                                |
   |                                                                               |         FROM                                                                                                                                                                                                             |             |               |                                |
   |                                                                               |              ${databasename}.${tablename}                                                                                                                                                                                |             |               |                                |
   |                                                                               |    ;");                                                                                                                                                                                                                  |             |               |                                |
   +-------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+---------------+--------------------------------+
